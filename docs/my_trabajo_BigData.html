<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Arantxa Anais Arcos Raimundo">
<meta name="description" content="Un recorrido por las películas y los personajes del Universo Cinematográfico de Marvel">
<title>MCU. Un análisis codificado – MCU</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./imagenes/icono_marvel.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-f54fa83ccd8f86fe7238c9291c42d766.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-920e3b13c0e5d301c7b927ae2dec49da.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la busqueda",
    "search-hide-matches-text": "Esconder resultados adicionales",
    "search-more-match-text": "hay más resultados en este documento",
    "search-more-matches-text": "más resultados en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script><style>html{ scroll-behavior: smooth; }</style>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: EB1F48;
      }

      .quarto-title-block .quarto-title-banner {
        color: EB1F48;
      }
</style>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="site_libs/plotly-binding-4.11.0/plotly.js"></script><script src="site_libs/typedarray-0.1/typedarray.min.js"></script><script src="site_libs/jquery-3.5.1/jquery.min.js"></script><link href="site_libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.2/js/crosstalk.min.js"></script><link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script><link rel="shortcut icon" href="imagenes/uv.jpeg">
<link rel="stylesheet" href="assets/styles.css">
</head>
<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./imagenes/uv.jpg" alt="" class="navbar-logo light-content"><img src="./imagenes/uv.jpg" alt="" class="navbar-logo dark-content"></a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">MCU</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Buscar"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Navegación de palanca" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item compact">
    <a class="nav-link" href="./index.html"> <i class="bi bi-bi bi-camera-reels" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link active" href="./my_trabajo_BigData.html" aria-current="page"> 
<span class="menu-text">Trabajo individual</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/araarcos"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:<araia@alumni.uv.es>"> <i class="bi bi-envelope" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-left">
      <div class="quarto-title-block"><div><h1 class="title">MCU. Un análisis codificado</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Código</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Enseñar el código</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Esconder el código</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">Ver el código</a></li></ul></div></div>
                  <div>
        <div class="description">
          <p>Un recorrido por las películas y los personajes del Universo Cinematográfico de Marvel</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">trabajo BigData</div>
                <div class="quarto-category">marvel</div>
                <div class="quarto-category">hérores</div>
                <div class="quarto-category">películas</div>
              </div>
                  </div>
  </div>
    
  <div class="quarto-title-meta-author column-page-left">
    <div class="quarto-title-meta-heading">Autor</div>
    <div class="quarto-title-meta-heading">Afiliación</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author">Arantxa Anais Arcos Raimundo </p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              <a href="https://www.uv.es">
              Universitat de València
              </a>
            </p>
        </div>
    </div>

  <div class="quarto-title-meta column-page-left">

        
      <div>
      <div class="quarto-title-meta-heading">Fecha de Publicación</div>
      <div class="quarto-title-meta-contents">
        <p class="date">2 de enero de 2026</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Índice</h2>
   
  <ul>
<li><a href="#motivaci%C3%B3n" id="toc-motivación" class="nav-link active" data-scroll-target="#motivaci%C3%B3n">Motivación</a></li>
  <li><a href="#historia-del-mcu" id="toc-historia-del-mcu" class="nav-link" data-scroll-target="#historia-del-mcu">Historia del MCU</a></li>
  <li><a href="#introducci%C3%B3n" id="toc-introducción" class="nav-link" data-scroll-target="#introducci%C3%B3n">Introducción</a></li>
  <li><a href="#marvel-studios" id="toc-marvel-studios" class="nav-link" data-scroll-target="#marvel-studios">Marvel Studios</a></li>
  <li>
<a href="#algunos-gr%C3%A1ficos" id="toc-algunos-gráficos" class="nav-link" data-scroll-target="#algunos-gr%C3%A1ficos">Algunos gráficos</a>
  <ul class="collapse">
<li><a href="#primeros-gr%C3%A1ficos.-comparativa-num%C3%A9rica" id="toc-primeros-gráficos.-comparativa-numérica" class="nav-link" data-scroll-target="#primeros-gr%C3%A1ficos.-comparativa-num%C3%A9rica">Primeros gráficos. Comparativa numérica</a></li>
  <li><a href="#segundo-gr%C3%A1fico.-marvel-y-la-taquilla" id="toc-segundo-gráfico.-marvel-y-la-taquilla" class="nav-link" data-scroll-target="#segundo-gr%C3%A1fico.-marvel-y-la-taquilla">Segundo gráfico. Marvel y la taquilla</a></li>
  <li><a href="#otro-gr%C3%A1fico.-apariciones-en-c%C3%B3mics-y-pel%C3%ADculas." id="toc-otro-gráfico.-apariciones-en-cómics-y-películas." class="nav-link" data-scroll-target="#otro-gr%C3%A1fico.-apariciones-en-c%C3%B3mics-y-pel%C3%ADculas.">Otro gráfico. Apariciones en cómics y películas.</a></li>
  <li><a href="#cu%C3%A1l-es-la-pel%C3%ADcula-m%C3%A1s-larga-a-qu%C3%A9-fase-pertenece" id="toc-cuál-es-la-película-más-larga-a-qué-fase-pertenece" class="nav-link" data-scroll-target="#cu%C3%A1l-es-la-pel%C3%ADcula-m%C3%A1s-larga-a-qu%C3%A9-fase-pertenece">¿Cuál es la película más larga? ¿A qué fase pertenece?</a></li>
  <li><a href="#cartelera" id="toc-cartelera" class="nav-link" data-scroll-target="#cartelera">Cartelera</a></li>
  <li><a href="#informaci%C3%B3n-sobre-la-sesi%C3%B3n" id="toc-información-sobre-la-sesión" class="nav-link" data-scroll-target="#informaci%C3%B3n-sobre-la-sesi%C3%B3n">Información sobre la sesión</a></li>
  </ul>
</li>
  </ul><div class="quarto-other-links"><h2>Otros Enlaces</h2><ul><li><a href="https://perezp44.github.io/intro-ds-25-26-web/"><i class="bi bi-link-45deg"></i>Web del curso</a></li><li><a href="https://perezp44.github.io/intro-ds-25-26-web/05-trabajos-estudiantes.html"><i class="bi bi-link-45deg"></i>Trabajos de mis compañeros</a></li><li><a href="https://github.com/araarcos/trabajo_BigData_individual"><i class="bi bi-link-45deg"></i>Repo del trabajo</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full column-page-left" id="quarto-document-content"><section id="motivación" class="level2"><h2 class="anchored" data-anchor-id="motivación">Motivación</h2>
<p>El Universo Cinematográfico de Marvel ha cambiado la industria del cine al popularizar el concepto de <em>multiverso</em> y <em>universo compartido</em>. No se trata solo de películas individuales, sino de una red interconectada de historias donde las acciones de una película afectan a las demás y todas estas están relacionadas.</p>
<p>Así pues, se ha convertido en una de las franquicias cinematográficas más taquillera de la historia, demostrando cómo una saga a largo plazo como lo es la <em>Saga del infinito</em> puede mantener el interés del público durante más de una década.</p>
<p>Por ello, el trabajo presente tiene el objetivo de entender y averiguar las distintas características de las películas y personajes de Marvel desde la perspectiva de una fan.</p>
<p><em>Así que vamos allá!!</em></p>
</section><section id="historia-del-mcu" class="level2"><h2 class="anchored" data-anchor-id="historia-del-mcu">Historia del MCU</h2>
<p>En primer lugar, debemos saber que el UCM es una franquicia de medios centrada en una serie de películas de superhéroes producidas por Marvel Studios, basada en los personajes de Marvel Comics. La saga se divide en fases con dos arcos grandes: la Saga del Infinito y la Saga del Multiverso.</p>
<p>Nos centramos en sobre todo en la <em>Saga del Infinito</em> ya que es dónde se encuentra el grupo de <em>Avengers</em> el cual estaremos analizando durante todo el trabajo. Cabe mencionar que la película que pone final a la lucha de los vengadores está en la fase tres y es <em>Avengers: Endgame</em> (2019).</p>
<p>Por otro lado, la primera película fue <em>Iron Man</em> en 2008 y fue dirigida por Jon Favreau. Esta película tiene mucha relevancia ya que fue el inicio de la presentación de héores individuales para posteriormente dar lugar a los Vengadores.</p>
<p>Así pues, en relación con <em>The Avengers</em> estos se reunen por primera vez en 2012, año de estreno de la película. El grupo original está formado por:</p>
<ul>
<li>Iron Man.</li>
<li>Captain America.</li>
<li>Thor.</li>
<li>Hulk.</li>
<li>Black Widow.</li>
<li>Hawkeye.</li>
</ul>
<p>Sin embargo, cabe mencionar que los personajes aparecidos en la última batalla y que, por tanto, vamos a considerar Vengadores y son los que vamos a analizar son los siguientes:</p>
<ul>
<li><p>Trinidad de Vengadores: Iron Man, Capitán América y Thor.</p></li>
<li><p>Líderes de apoyo: Hulk, Hawkeye, War Machine, Ant-Man, Rocket y Nebula.</p></li>
<li><p>Héroes regresados por portales: Spider-Man, Black Panther, Shuri, Okoye, Falcon, Winter Soldier, Scarlet Witch, Doctor Strange, Wong y Wasp.</p></li>
<li><p>Guardianes de la Galaxia: Star-Lord, Drax, Mantis, Groot y Gamora (2014).</p></li>
<li><p>Refuerzos clave: Capitana Marvel, Valkyrie, Korg, Miek y Rescue (Pepper Potts).</p></li>
<li><p>Ejércitos aliados: Las Dora Milaje de Wakanda, los Hechiceros de las Artes Místicas, el ejército de Asgard y los Saqueadores.</p></li>
<li><p>Especial mención a Black Widow.</p></li>
</ul></section><section id="introducción" class="level2"><h2 class="anchored" data-anchor-id="introducción">Introducción</h2>
<p>Vamos a utilizar datos extraídos de Kaggle, los cuales podemos encontrar <a href="https://www.kaggle.com/datasets/jainaru/marvel-movies-box-office-data?resource=download">aquí</a>, <a href="https://www.kaggle.com/datasets/sahirmaharajj/the-avengers-dataset/data">aquí</a>, <a href="https://www.kaggle.com/datasets/dalepeh/mcu-movies-dataset">aquí</a> y <a href="https://www.kaggle.com/datasets/jonbown/marvel-screen-time">aquí</a>,</p>
<p>A continuación, explicaremos un poco nuestra elección de datos:</p>
<p>Por un lado, encontramos dfs en los que solo tenemos las películas del MCU y sus distintas variables con las que realizaremos el trabajo como son: las fases, la recaudación, las valoraciones, los años de estreno, los directores … Además, tenemos un df con la duración en minutos de las películas.</p>
<p>Por otro lado, hemos cargado dfs con los personajes tanto del MCU como de los cómics para poder trabajar con el global y solo con los Vengadores.</p>
<p>Los datos se pueden cargar en la memoria de de R/RStudio de esta forma:</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co">#Importación de películas</span></span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a>my_ruta <span class="ot">&lt;-</span> <span class="st">"./data/marvel_movies.csv"</span></span>
<span id="cb1-4"><a href="#cb1-4"></a></span>
<span id="cb1-5"><a href="#cb1-5"></a>df_movies <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(my_ruta)</span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">names</span> (df_movies)</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co">#&gt;  [1] "movie"                          "category"                      </span></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="co">#&gt;  [3] "year"                           "worldwide gross ($m)"          </span></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="co">#&gt;  [5] "% budget recovered"             "critics % score"               </span></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="co">#&gt;  [7] "audience % score"               "audience vs critics % deviance"</span></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="co">#&gt;  [9] "budget"                         "domestic gross ($m)"           </span></span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="co">#&gt; [11] "international gross ($m)"       "opening weekend ($m)"          </span></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="co">#&gt; [13] "second weekend ($m)"            "1st vs 2nd weekend drop off"   </span></span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="co">#&gt; [15] "% gross from opening weekend"   "% gross from domestic"         </span></span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="co">#&gt; [17] "% gross from international"     "% budget opening weekend"</span></span>
<span id="cb1-17"><a href="#cb1-17"></a></span>
<span id="cb1-18"><a href="#cb1-18"></a>my_ruta_fases <span class="ot">&lt;-</span> <span class="st">"./data/box_office.csv"</span></span>
<span id="cb1-19"><a href="#cb1-19"></a></span>
<span id="cb1-20"><a href="#cb1-20"></a>df_fases <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(my_ruta_fases)</span>
<span id="cb1-21"><a href="#cb1-21"></a></span>
<span id="cb1-22"><a href="#cb1-22"></a>my_ruta_duracion <span class="ot">&lt;-</span> <span class="st">"./data/movie_times.csv"</span></span>
<span id="cb1-23"><a href="#cb1-23"></a></span>
<span id="cb1-24"><a href="#cb1-24"></a>df_duracion <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(my_ruta_duracion)</span>
<span id="cb1-25"><a href="#cb1-25"></a></span>
<span id="cb1-26"><a href="#cb1-26"></a><span class="co">#- A continuación, para obtener los datos sobre los personajes podemos hacerlo de dos formas:</span></span>
<span id="cb1-27"><a href="#cb1-27"></a></span>
<span id="cb1-28"><a href="#cb1-28"></a>my_ruta_personajes <span class="ot">&lt;-</span> <span class="st">"./data/avengers.csv"</span> <span class="co">#- En este caso, creamos ruta relativa e importamos</span></span>
<span id="cb1-29"><a href="#cb1-29"></a></span>
<span id="cb1-30"><a href="#cb1-30"></a>df_personajes <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(my_ruta_personajes)</span>
<span id="cb1-31"><a href="#cb1-31"></a></span>
<span id="cb1-32"><a href="#cb1-32"></a><span class="co">#install.packages("fivethirtyeight") ---- En este otro, instalamos el paquete que contiene a los personajes </span></span>
<span id="cb1-33"><a href="#cb1-33"></a><span class="co">#library(fivethirtyeight)</span></span>
<span id="cb1-34"><a href="#cb1-34"></a><span class="co">#df_personajes &lt;- avengers ---- asociamos el nombre que queremos.install.packages("fivethirtyeight")</span></span>
<span id="cb1-35"><a href="#cb1-35"></a></span>
<span id="cb1-36"><a href="#cb1-36"></a>my_ruta_fases <span class="ot">&lt;-</span> <span class="st">"./data/box_office.csv"</span></span>
<span id="cb1-37"><a href="#cb1-37"></a></span>
<span id="cb1-38"><a href="#cb1-38"></a>df_fases <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(my_ruta_fases)</span>
<span id="cb1-39"><a href="#cb1-39"></a></span>
<span id="cb1-40"><a href="#cb1-40"></a>my_ruta_total_personajes <span class="ot">&lt;-</span> <span class="st">"./data/marvel_wikia_data.csv"</span></span>
<span id="cb1-41"><a href="#cb1-41"></a></span>
<span id="cb1-42"><a href="#cb1-42"></a>df_total_personajes <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(my_ruta_total_personajes)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>El primer dataset contiene observaciones sobre un conjunto de 36 películas de Marvel. Hay 18 variables. El segundo dataset contiente observaciones sobre un conjunto 173 personajes de cómics. Hay 22 variables.</p>
<p>Cabe destacar que los datasets escogidos solo llegan hasta 2023 por lo que el análisis no incluirá los cambios que han habido de vengadores o algunas de las nuevas incorporaciones más recientes ni tendrá todas las películas de la fase 5 ni 6 (actual).</p>
<hr></section><section id="marvel-studios" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="marvel-studios">Marvel Studios</h2>
<p>A continuación, podemos observar una imagen en la que se encuentran muchos de los principales personajes del Universo Cinematográfico de Marvel.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="https://images.alphacoders.com/100/1003204.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Marvel"><img src="https://images.alphacoders.com/100/1003204.jpg" class="img-fluid figure-img" alt="Marvel"></a></p>
<figcaption>Marvel</figcaption></figure>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-3-1.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-3-1.gif" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<hr>
<p>Como bien sabemos el MCU es mucho más extenso ya que en los cómics hay muchos más personajes de los que han llegado a salir en la saga de <em>Avengers</em>; por ello, en el margen vamos a poner una foto con muchos más héroes y heroínas:</p>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="./imagenes/universo_marvel.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="./imagenes/universo_marvel.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></a></p>
</figure>
</div>
</div></div><hr></section><section id="algunos-gráficos" class="level2"><h2 class="anchored" data-anchor-id="algunos-gráficos">Algunos gráficos</h2>
<p>Bueno pues vamos a hacer algún gráfico, pero claro antes he de cargar los paquetes.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="fu">library</span>(forcats)</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="fu">library</span>(gt)</span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="fu">library</span>(plotly)</span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="fu">library</span>(stringr)</span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="fu">library</span> (treemap) <span class="co">#install.packages ("treemap")</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="fu">library</span>(ggimage)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Por otro lado, vamos a establecer la paleta que pondremos en nuestros gráficos.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co">#Configuración de paleta</span></span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="fu">library</span>(paletteer)</span>
<span id="cb3-4"><a href="#cb3-4"></a></span>
<span id="cb3-5"><a href="#cb3-5"></a>paleta_discreta <span class="ot">&lt;-</span> <span class="fu">paletteer_c</span>( <span class="st">"ggthemes::Orange-Blue-White Diverging"</span>, <span class="dv">6</span>)</span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a>scale_fill_default <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb3-8"><a href="#cb3-8"></a>  <span class="fu">scale_fill_gradientn</span>(<span class="at">colors =</span> mi_paleta, ...)</span>
<span id="cb3-9"><a href="#cb3-9"></a>}</span>
<span id="cb3-10"><a href="#cb3-10"></a></span>
<span id="cb3-11"><a href="#cb3-11"></a>scale_color_default <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb3-12"><a href="#cb3-12"></a>  <span class="fu">scale_color_gradientn</span>(<span class="at">colors =</span> mi_paleta, ...)</span>
<span id="cb3-13"><a href="#cb3-13"></a>}</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Un paso previo también es arreglar los datos. Para ello, en primer lugar, vamos a quitar aquellas columnas que no necesitamos o añadir las que nos hagan falta.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co">#- En el df de películas no vamos a quitar ninguna columna; sin embargo, vamos a añadir una con el protagonista de cada película.</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>df_movies <span class="ot">&lt;-</span> df_movies <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="fu">mutate</span> (<span class="at">protagonista =</span> <span class="fu">case_when</span>(</span>
<span id="cb4-4"><a href="#cb4-4"></a>    <span class="fu">grepl</span>(<span class="st">"Iron"</span>, movie) <span class="sc">~</span> <span class="st">"Iron Man"</span>,</span>
<span id="cb4-5"><a href="#cb4-5"></a>    <span class="fu">grepl</span>(<span class="st">"America"</span>, movie) <span class="sc">~</span> <span class="st">"Captain America"</span>,</span>
<span id="cb4-6"><a href="#cb4-6"></a>    <span class="fu">grepl</span>(<span class="st">"Thor"</span>, movie) <span class="sc">~</span> <span class="st">"Thor"</span>,</span>
<span id="cb4-7"><a href="#cb4-7"></a>    <span class="fu">grepl</span>(<span class="st">"Incredible Hulk"</span>, movie) <span class="sc">~</span> <span class="st">"Hulk"</span>,</span>
<span id="cb4-8"><a href="#cb4-8"></a>    <span class="fu">grepl</span>(<span class="st">"Widow"</span>, movie) <span class="sc">~</span> <span class="st">"Black Widow"</span>,</span>
<span id="cb4-9"><a href="#cb4-9"></a>    <span class="fu">grepl</span>(<span class="st">"Ant-Man"</span>, movie) <span class="sc">~</span> <span class="st">"Ant-Man"</span>,</span>
<span id="cb4-10"><a href="#cb4-10"></a>    <span class="fu">grepl</span>(<span class="st">"Spider-Man"</span>, movie) <span class="sc">~</span> <span class="st">"Spider-Man"</span>,</span>
<span id="cb4-11"><a href="#cb4-11"></a>    <span class="fu">grepl</span>(<span class="st">"Shang-Chi"</span>, movie) <span class="sc">~</span> <span class="st">"Shang-Chi"</span>,</span>
<span id="cb4-12"><a href="#cb4-12"></a>    <span class="fu">grepl</span>(<span class="st">"Deadpool"</span>, movie) <span class="sc">~</span> <span class="st">"Deadpool"</span>,</span>
<span id="cb4-13"><a href="#cb4-13"></a>    <span class="fu">grepl</span>(<span class="st">"Panther"</span>, movie) <span class="sc">~</span> <span class="st">"Black Panther"</span>,</span>
<span id="cb4-14"><a href="#cb4-14"></a>    <span class="fu">grepl</span>(<span class="st">"Strange"</span>, movie) <span class="sc">~</span> <span class="st">"Dr Strange"</span>,</span>
<span id="cb4-15"><a href="#cb4-15"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb4-16"><a href="#cb4-16"></a>  <span class="fu">relocate</span> (protagonista, <span class="at">.after =</span> category)</span>
<span id="cb4-17"><a href="#cb4-17"></a></span>
<span id="cb4-18"><a href="#cb4-18"></a><span class="co">#- En este caso, vamos a juntar el df de duración con el dde fases; para ello, primeramente tenemos que cambiar algunos nombres de películas porque la forma en la que están escritos es diferente en cada df y no podemos juntarlos bien.</span></span>
<span id="cb4-19"><a href="#cb4-19"></a>df_duracion <span class="ot">&lt;-</span> df_duracion <span class="sc">%&gt;%</span></span>
<span id="cb4-20"><a href="#cb4-20"></a>  <span class="fu">mutate</span>(<span class="at">movie =</span> <span class="fu">case_when</span>(</span>
<span id="cb4-21"><a href="#cb4-21"></a>    movie <span class="sc">==</span> <span class="st">"Spider-Man: Far from Home"</span> <span class="sc">~</span> <span class="st">"Spider-Man: Far From Home"</span>,</span>
<span id="cb4-22"><a href="#cb4-22"></a>    movie <span class="sc">==</span> <span class="st">"Shang-Chi"</span> <span class="sc">~</span> <span class="st">"Shang-Chi and the Legend of the Ten Rings"</span>,</span>
<span id="cb4-23"><a href="#cb4-23"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> movie))</span>
<span id="cb4-24"><a href="#cb4-24"></a>  </span>
<span id="cb4-25"><a href="#cb4-25"></a>df_fases <span class="ot">&lt;-</span> df_fases <span class="sc">%&gt;%</span></span>
<span id="cb4-26"><a href="#cb4-26"></a>  <span class="fu">select</span> (Phase, Film, Year_Release, Director, movie_image) <span class="sc">%&gt;%</span></span>
<span id="cb4-27"><a href="#cb4-27"></a>  <span class="fu">left_join</span> (df_duracion, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Film"</span> <span class="ot">=</span> <span class="st">"movie"</span>))  <span class="co">#- Tener en cuenta que en df_duración solo hasta 2021, aparecerán 5 NAs.</span></span>
<span id="cb4-28"><a href="#cb4-28"></a></span>
<span id="cb4-29"><a href="#cb4-29"></a><span class="co">#- Por otra parte, en el df de personajes vamos a hacer algunas modificaciones. Comenzaremos quitando estas dos columnas que no nos hacen falta:</span></span>
<span id="cb4-30"><a href="#cb4-30"></a>df_personajes <span class="ot">&lt;-</span> df_personajes <span class="sc">%&gt;%</span></span>
<span id="cb4-31"><a href="#cb4-31"></a>  <span class="fu">select</span> (<span class="sc">-</span> V22, <span class="sc">-</span> Notes)</span>
<span id="cb4-32"><a href="#cb4-32"></a></span>
<span id="cb4-33"><a href="#cb4-33"></a><span class="co">#- A continuación, añadimos una nueva columna llamada "Alias" en las que pondremos los nombres de superhéroe de cada personaje y la recolocaremos al lado de los Nombres/Alias originales:</span></span>
<span id="cb4-34"><a href="#cb4-34"></a></span>
<span id="cb4-35"><a href="#cb4-35"></a>df_personajes <span class="ot">&lt;-</span> df_personajes <span class="sc">%&gt;%</span></span>
<span id="cb4-36"><a href="#cb4-36"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span> <span class="sc">!=</span> <span class="st">"Tony Masters"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-37"><a href="#cb4-37"></a>  <span class="fu">mutate</span>(<span class="at">Alias =</span> <span class="fu">case_when</span>(</span>
<span id="cb4-38"><a href="#cb4-38"></a>    <span class="fu">grepl</span>(<span class="st">"Tony"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Iron Man"</span>,</span>
<span id="cb4-39"><a href="#cb4-39"></a>    <span class="fu">grepl</span>(<span class="st">"Clinton Francis Barton"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Hawkeye"</span>,</span>
<span id="cb4-40"><a href="#cb4-40"></a>    <span class="fu">grepl</span>(<span class="st">"Rogers"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Captain America"</span>,</span>
<span id="cb4-41"><a href="#cb4-41"></a>    <span class="fu">grepl</span>(<span class="st">"Thor"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Thor"</span>,</span>
<span id="cb4-42"><a href="#cb4-42"></a>    <span class="fu">grepl</span>(<span class="st">"Banner"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Hulk"</span>,</span>
<span id="cb4-43"><a href="#cb4-43"></a>    <span class="fu">grepl</span>(<span class="st">"Romanova"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Black Widow"</span>,</span>
<span id="cb4-44"><a href="#cb4-44"></a>    <span class="fu">grepl</span>(<span class="st">"Scott Edward Harris Lang"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Ant-Man"</span>,</span>
<span id="cb4-45"><a href="#cb4-45"></a>    <span class="fu">grepl</span>(<span class="st">"Wanda Maximoff"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Scarlet Witch"</span>,</span>
<span id="cb4-46"><a href="#cb4-46"></a>    <span class="fu">grepl</span>(<span class="st">"Peter Benjamin Parker"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Spider-Man"</span>,</span>
<span id="cb4-47"><a href="#cb4-47"></a>    <span class="fu">grepl</span>(<span class="st">"Shang-Chi"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Shang-Chi"</span>,</span>
<span id="cb4-48"><a href="#cb4-48"></a>    <span class="fu">grepl</span>(<span class="st">"T'Challa"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Black Panther"</span>,</span>
<span id="cb4-49"><a href="#cb4-49"></a>    <span class="fu">grepl</span>(<span class="st">"Buchanan"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Bucky"</span>,</span>
<span id="cb4-50"><a href="#cb4-50"></a>    <span class="fu">grepl</span>(<span class="st">"Victor Shade "</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Vision"</span>,</span>
<span id="cb4-51"><a href="#cb4-51"></a>    <span class="fu">grepl</span>(<span class="st">"Doctor Stephen Vincent Strange"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Dr Strange"</span>,</span>
<span id="cb4-52"><a href="#cb4-52"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Other"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-53"><a href="#cb4-53"></a>  <span class="fu">relocate</span>(Alias, <span class="at">.after =</span> <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>)</span>
<span id="cb4-54"><a href="#cb4-54"></a></span>
<span id="cb4-55"><a href="#cb4-55"></a><span class="co">#- También vamos a crear un nuevo df con los Vengadores para poder juntarlos con el df_movies</span></span>
<span id="cb4-56"><a href="#cb4-56"></a></span>
<span id="cb4-57"><a href="#cb4-57"></a>avengers <span class="ot">&lt;-</span> df_personajes <span class="sc">%&gt;%</span></span>
<span id="cb4-58"><a href="#cb4-58"></a>  <span class="fu">filter</span> (Alias <span class="sc">!=</span> <span class="st">"Other"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-59"><a href="#cb4-59"></a>  <span class="fu">select</span> (URL, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>, Alias, Appearances, Gender)</span>
<span id="cb4-60"><a href="#cb4-60"></a></span>
<span id="cb4-61"><a href="#cb4-61"></a><span class="co">#- Finalmente, juntaremos el df de avengers con el de películas para tener observar las películas individuales que tienen algunos personajes:</span></span>
<span id="cb4-62"><a href="#cb4-62"></a></span>
<span id="cb4-63"><a href="#cb4-63"></a>pelicula_propia <span class="ot">&lt;-</span> avengers <span class="sc">%&gt;%</span></span>
<span id="cb4-64"><a href="#cb4-64"></a>  <span class="fu">left_join</span>(df_movies, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Alias"</span> <span class="ot">=</span> <span class="st">"protagonista"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-65"><a href="#cb4-65"></a>  <span class="fu">select</span> (<span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>,movie, Gender, Appearances, Alias, year)</span>
<span id="cb4-66"><a href="#cb4-66"></a></span>
<span id="cb4-67"><a href="#cb4-67"></a><span class="co">#- Finalmente, los df que usaremos son los siguientes:</span></span>
<span id="cb4-68"><a href="#cb4-68"></a><span class="co">#- df_fases</span></span>
<span id="cb4-69"><a href="#cb4-69"></a><span class="co">#- pelicula_propia</span></span>
<span id="cb4-70"><a href="#cb4-70"></a><span class="co">#- df_movies</span></span>
<span id="cb4-71"><a href="#cb4-71"></a><span class="co">#- df_total_personajes</span></span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<hr>
<section id="primeros-gráficos.-comparativa-numérica" class="level3"><h3 class="anchored" data-anchor-id="primeros-gráficos.-comparativa-numérica">Primeros gráficos. Comparativa numérica</h3>
<p>En este apartado, realizamos una comparación entre el número de héroes y heroínas y la cantidad de películas que están asociadas a cada uno.</p>
<p>En este primer gráfico, vamos a contrastar el número de personajes que hay en el MCU según su género para mostrar en una gráfica que el número de hombres es mayor al de mujeres, debido a que en un comienzo la mayoría de personajes que se escribían eran hombres.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co">#- primer gráfico</span></span>
<span id="cb5-2"><a href="#cb5-2"></a></span>
<span id="cb5-3"><a href="#cb5-3"></a>sexo <span class="ot">&lt;-</span> df_total_personajes <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="#cb5-4"></a>  <span class="fu">filter</span>(SEX <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Male Characters"</span>, <span class="st">"Female Characters"</span>))</span>
<span id="cb5-5"><a href="#cb5-5"></a></span>
<span id="cb5-6"><a href="#cb5-6"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> sexo,</span>
<span id="cb5-7"><a href="#cb5-7"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> SEX, <span class="at">fill =</span> SEX)) <span class="sc">+</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb5-9"><a href="#cb5-9"></a>  <span class="fu">labs</span>(</span>
<span id="cb5-10"><a href="#cb5-10"></a>    <span class="at">title =</span> <span class="st">"Comparativa de sexo entre superhéroes"</span>,</span>
<span id="cb5-11"><a href="#cb5-11"></a>    <span class="at">x =</span> <span class="st">"Sexo"</span>,</span>
<span id="cb5-12"><a href="#cb5-12"></a>    <span class="at">y =</span> <span class="st">"Número de superhéroes"</span>) <span class="sc">+</span></span>
<span id="cb5-13"><a href="#cb5-13"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">"mono"</span>) <span class="sc">+</span></span>
<span id="cb5-14"><a href="#cb5-14"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb5-15"><a href="#cb5-15"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">15</span>,</span>
<span id="cb5-16"><a href="#cb5-16"></a>                                   <span class="at">vjust=</span><span class="dv">2</span>,</span>
<span id="cb5-17"><a href="#cb5-17"></a>                                   <span class="at">face=</span><span class="st">"bold"</span>)) <span class="sc">+</span>  </span>
<span id="cb5-18"><a href="#cb5-18"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> paleta_discreta)</span>
<span id="cb5-19"><a href="#cb5-19"></a></span>
<span id="cb5-20"><a href="#cb5-20"></a>p</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-6-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Tras esta imagen, vamos a comparar el porcentaje de películas individuales que tienen los hombres vs las mujeres dentro del equipo de Vengadores en un piechart. Como podemos comprobar, al haber más héroes, tanto en el equipo de Avengers como en general, el porcentaje de películas que van a estar protagonizadas por ellos es mucho mayor.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a></span>
<span id="cb6-2"><a href="#cb6-2"></a>porcentaje <span class="ot">&lt;-</span> pelicula_propia <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(movie)) <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="fu">count</span>(Gender) <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-6"><a href="#cb6-6"></a>    <span class="at">porcentaje =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n),</span>
<span id="cb6-7"><a href="#cb6-7"></a>    <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">percent</span>(porcentaje, <span class="at">accuracy =</span> <span class="dv">1</span>))</span>
<span id="cb6-8"><a href="#cb6-8"></a></span>
<span id="cb6-9"><a href="#cb6-9"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>( porcentaje,</span>
<span id="cb6-10"><a href="#cb6-10"></a>  <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> n, <span class="at">fill =</span> Gender)) <span class="sc">+</span></span>
<span id="cb6-11"><a href="#cb6-11"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb6-12"><a href="#cb6-12"></a>  <span class="fu">coord_polar</span>(<span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb6-13"><a href="#cb6-13"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb6-14"><a href="#cb6-14"></a>    <span class="fu">aes</span>(<span class="at">label =</span> label),</span>
<span id="cb6-15"><a href="#cb6-15"></a>    <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb6-16"><a href="#cb6-16"></a>    <span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb6-17"><a href="#cb6-17"></a>    <span class="at">size =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb6-18"><a href="#cb6-18"></a>  <span class="fu">theme_void</span>(<span class="at">base_family =</span> <span class="st">"mono"</span>)<span class="sc">+</span></span>
<span id="cb6-19"><a href="#cb6-19"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">15</span>,</span>
<span id="cb6-20"><a href="#cb6-20"></a>                                   <span class="at">vjust=</span><span class="dv">2</span>,</span>
<span id="cb6-21"><a href="#cb6-21"></a>                                   <span class="at">face=</span><span class="st">"bold"</span>)) <span class="sc">+</span> </span>
<span id="cb6-22"><a href="#cb6-22"></a>  <span class="fu">labs</span>(</span>
<span id="cb6-23"><a href="#cb6-23"></a>    <span class="at">title =</span> <span class="st">"Porcentaje de películas por género"</span>,</span>
<span id="cb6-24"><a href="#cb6-24"></a>    <span class="at">subtitle =</span> <span class="st">"(protagonistas vengadores)"</span>) <span class="sc">+</span></span>
<span id="cb6-25"><a href="#cb6-25"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> paleta_discreta)</span>
<span id="cb6-26"><a href="#cb6-26"></a></span>
<span id="cb6-27"><a href="#cb6-27"></a>p</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-7-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Por último, en la siguiente gráfica se muestra el número de películas que tiene cada uno de los Vengadores. Cabe destacar el caso de Spider-Man el cual realmente tendría más películas; sin embargo, en este análisis solo usamos las más recientes que son las 3 protagonizadas por el actor Tom Holland y la de animación con Miles Morales.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a></span>
<span id="cb7-2"><a href="#cb7-2"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(pelicula_propia <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(movie)), <span class="fu">aes</span>(<span class="at">x =</span> Alias)) <span class="sc">+</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"#ff721a"</span>) <span class="sc">+</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="fu">labs</span>(</span>
<span id="cb7-5"><a href="#cb7-5"></a>    <span class="at">title =</span> <span class="st">"Número de películas por personaje"</span>,</span>
<span id="cb7-6"><a href="#cb7-6"></a>    <span class="at">x =</span> <span class="st">"Personajes"</span>,</span>
<span id="cb7-7"><a href="#cb7-7"></a>    <span class="at">y =</span> <span class="st">"Número de películas"</span>) <span class="sc">+</span></span>
<span id="cb7-8"><a href="#cb7-8"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb7-9"><a href="#cb7-9"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(forcats<span class="sc">::</span><span class="fu">fct_rev</span>(forcats<span class="sc">::</span><span class="fu">fct_infreq</span>(Alias))),</span>
<span id="cb7-10"><a href="#cb7-10"></a>         <span class="at">fill =</span> <span class="st">"#ff721a"</span>) <span class="sc">+</span></span>
<span id="cb7-11"><a href="#cb7-11"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">"mono"</span>)<span class="sc">+</span></span>
<span id="cb7-12"><a href="#cb7-12"></a>  <span class="fu">theme</span> (<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">15</span>,</span>
<span id="cb7-13"><a href="#cb7-13"></a>                                   <span class="at">vjust=</span><span class="dv">2</span>,</span>
<span id="cb7-14"><a href="#cb7-14"></a>                                   <span class="at">face=</span><span class="st">"bold"</span>))</span>
<span id="cb7-15"><a href="#cb7-15"></a></span>
<span id="cb7-16"><a href="#cb7-16"></a>p</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-8-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<hr></section><section id="segundo-gráfico.-marvel-y-la-taquilla" class="level3"><h3 class="anchored" data-anchor-id="segundo-gráfico.-marvel-y-la-taquilla">Segundo gráfico. Marvel y la taquilla</h3>
<p>A continuación, vamos a construir un gráfico circular para ver qué películas han tenido una mayor recaudación.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co">#- segundo gráfico</span></span>
<span id="cb8-2"><a href="#cb8-2"></a></span>
<span id="cb8-3"><a href="#cb8-3"></a>recaudacion <span class="ot">&lt;-</span> df_movies <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="fu">select</span>(movie, <span class="st">`</span><span class="at">worldwide gross ($m)</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">worldwide gross ($m)</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-7"><a href="#cb8-7"></a>    <span class="at">id =</span> <span class="fu">row_number</span>(),</span>
<span id="cb8-8"><a href="#cb8-8"></a>    <span class="at">value =</span> <span class="st">`</span><span class="at">worldwide gross ($m)</span><span class="st">`</span>,</span>
<span id="cb8-9"><a href="#cb8-9"></a>    <span class="at">individual =</span> movie)</span>
<span id="cb8-10"><a href="#cb8-10"></a></span>
<span id="cb8-11"><a href="#cb8-11"></a>number_of_bar <span class="ot">&lt;-</span> <span class="fu">nrow</span>(recaudacion)</span>
<span id="cb8-12"><a href="#cb8-12"></a></span>
<span id="cb8-13"><a href="#cb8-13"></a>angle <span class="ot">&lt;-</span> <span class="dv">90</span> <span class="sc">-</span> <span class="dv">360</span> <span class="sc">*</span> (recaudacion<span class="sc">$</span>id <span class="sc">-</span> <span class="fl">0.5</span>) <span class="sc">/</span> number_of_bar</span>
<span id="cb8-14"><a href="#cb8-14"></a></span>
<span id="cb8-15"><a href="#cb8-15"></a>recaudacion<span class="sc">$</span>hjust <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(angle <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">90</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb8-16"><a href="#cb8-16"></a>recaudacion<span class="sc">$</span>angle <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(angle <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">90</span>, angle <span class="sc">+</span> <span class="dv">180</span>, angle)</span>
<span id="cb8-17"><a href="#cb8-17"></a></span>
<span id="cb8-18"><a href="#cb8-18"></a></span>
<span id="cb8-19"><a href="#cb8-19"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(recaudacion, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.factor</span>(id), <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb8-20"><a href="#cb8-20"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="fu">alpha</span>(<span class="st">"#2B5C8A"</span>, <span class="fl">0.9</span>)) <span class="sc">+</span></span>
<span id="cb8-21"><a href="#cb8-21"></a>    <span class="fu">ylim</span>(<span class="sc">-</span><span class="fu">max</span>(recaudacion<span class="sc">$</span>value) <span class="sc">*</span> <span class="fl">0.25</span>, <span class="fu">max</span>(recaudacion<span class="sc">$</span>value) <span class="sc">*</span> <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb8-22"><a href="#cb8-22"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">"mono"</span>) <span class="sc">+</span></span>
<span id="cb8-23"><a href="#cb8-23"></a>    <span class="fu">theme</span>(</span>
<span id="cb8-24"><a href="#cb8-24"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb8-25"><a href="#cb8-25"></a>    <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb8-26"><a href="#cb8-26"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb8-27"><a href="#cb8-27"></a>    <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">4</span>), <span class="st">"cm"</span>)) <span class="sc">+</span></span>
<span id="cb8-28"><a href="#cb8-28"></a>   <span class="fu">coord_polar</span>(<span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb8-29"><a href="#cb8-29"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb8-30"><a href="#cb8-30"></a>    <span class="at">data =</span> recaudacion,</span>
<span id="cb8-31"><a href="#cb8-31"></a>    <span class="fu">aes</span>(</span>
<span id="cb8-32"><a href="#cb8-32"></a>      <span class="at">x =</span> id,</span>
<span id="cb8-33"><a href="#cb8-33"></a>      <span class="at">y =</span> value <span class="sc">+</span> <span class="fu">max</span>(recaudacion<span class="sc">$</span>value) <span class="sc">*</span> <span class="fl">0.05</span>,</span>
<span id="cb8-34"><a href="#cb8-34"></a>      <span class="at">label =</span> individual,</span>
<span id="cb8-35"><a href="#cb8-35"></a>      <span class="at">hjust =</span> hjust),</span>
<span id="cb8-36"><a href="#cb8-36"></a>    <span class="at">angle =</span> recaudacion<span class="sc">$</span>angle,</span>
<span id="cb8-37"><a href="#cb8-37"></a>    <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>,</span>
<span id="cb8-38"><a href="#cb8-38"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb8-39"><a href="#cb8-39"></a>    <span class="at">alpha =</span> <span class="fl">0.7</span>)</span>
<span id="cb8-40"><a href="#cb8-40"></a></span>
<span id="cb8-41"><a href="#cb8-41"></a>p</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-9-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>A este gráfico, para hacer una mayor aproximación,lo acompañaremos con una tabla que muestre el top 5 películas más recaudadas.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>top5recaudacion <span class="ot">&lt;-</span> df_movies <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">worldwide gross ($m)</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>  <span class="fu">rename</span>(<span class="at">recaudacion_taquilla =</span> <span class="st">`</span><span class="at">worldwide gross ($m)</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5"></a>  <span class="fu">select</span>(movie, recaudacion_taquilla)</span>
<span id="cb9-6"><a href="#cb9-6"></a></span>
<span id="cb9-7"><a href="#cb9-7"></a></span>
<span id="cb9-8"><a href="#cb9-8"></a>top5rec_tabla<span class="ot">&lt;-</span> top5recaudacion <span class="sc">%&gt;%</span></span>
<span id="cb9-9"><a href="#cb9-9"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-10"><a href="#cb9-10"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb9-11"><a href="#cb9-11"></a>    <span class="at">title =</span> <span class="st">"Top 5 películas Marvel - Recaudación mundial"</span>,</span>
<span id="cb9-12"><a href="#cb9-12"></a>    <span class="at">subtitle =</span> <span class="st">"(en millones de dólares)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-13"><a href="#cb9-13"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb9-14"><a href="#cb9-14"></a>    <span class="at">movie =</span> <span class="st">"Película"</span>,</span>
<span id="cb9-15"><a href="#cb9-15"></a>    <span class="at">recaudacion_taquilla =</span> <span class="st">"Recaudación"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb9-16"><a href="#cb9-16"></a>  <span class="fu">fmt_currency</span>(</span>
<span id="cb9-17"><a href="#cb9-17"></a>    <span class="at">columns =</span> recaudacion_taquilla,</span>
<span id="cb9-18"><a href="#cb9-18"></a>    <span class="at">currency =</span> <span class="st">"USD"</span>,</span>
<span id="cb9-19"><a href="#cb9-19"></a>    <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-20"><a href="#cb9-20"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb9-21"><a href="#cb9-21"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb9-22"><a href="#cb9-22"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb9-23"><a href="#cb9-23"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb9-24"><a href="#cb9-24"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb9-25"><a href="#cb9-25"></a>    <span class="at">locations =</span> <span class="fu">cells_title</span>(<span class="at">groups =</span> <span class="fu">c</span>(<span class="st">"title"</span>, <span class="st">"subtitle"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb9-26"><a href="#cb9-26"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb9-27"><a href="#cb9-27"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb9-28"><a href="#cb9-28"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb9-29"><a href="#cb9-29"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb9-30"><a href="#cb9-30"></a>    <span class="at">table.background.color =</span> <span class="st">"#FFF6ED"</span>)</span>
<span id="cb9-31"><a href="#cb9-31"></a></span>
<span id="cb9-32"><a href="#cb9-32"></a>top5rec_tabla</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div id="pnomdamzqb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#pnomdamzqb table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#pnomdamzqb thead, #pnomdamzqb tbody, #pnomdamzqb tfoot, #pnomdamzqb tr, #pnomdamzqb td, #pnomdamzqb th {
  border-style: none;
}

#pnomdamzqb p {
  margin: 0;
  padding: 0;
}

#pnomdamzqb .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFF6ED;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#pnomdamzqb .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#pnomdamzqb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFF6ED;
  border-bottom-width: 0;
}

#pnomdamzqb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFF6ED;
  border-top-width: 0;
}

#pnomdamzqb .gt_heading {
  background-color: #FFF6ED;
  text-align: center;
  border-bottom-color: #FFF6ED;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pnomdamzqb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pnomdamzqb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pnomdamzqb .gt_col_heading {
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#pnomdamzqb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#pnomdamzqb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#pnomdamzqb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#pnomdamzqb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#pnomdamzqb .gt_spanner_row {
  border-bottom-style: hidden;
}

#pnomdamzqb .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#pnomdamzqb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#pnomdamzqb .gt_from_md > :first-child {
  margin-top: 0;
}

#pnomdamzqb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#pnomdamzqb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#pnomdamzqb .gt_stub {
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#pnomdamzqb .gt_stub_row_group {
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#pnomdamzqb .gt_row_group_first td {
  border-top-width: 2px;
}

#pnomdamzqb .gt_row_group_first th {
  border-top-width: 2px;
}

#pnomdamzqb .gt_summary_row {
  color: #333333;
  background-color: #FFF6ED;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pnomdamzqb .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#pnomdamzqb .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#pnomdamzqb .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pnomdamzqb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFF6ED;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pnomdamzqb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#pnomdamzqb .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#pnomdamzqb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#pnomdamzqb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pnomdamzqb .gt_footnotes {
  color: #333333;
  background-color: #FFF6ED;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pnomdamzqb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pnomdamzqb .gt_sourcenotes {
  color: #333333;
  background-color: #FFF6ED;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pnomdamzqb .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pnomdamzqb .gt_left {
  text-align: left;
}

#pnomdamzqb .gt_center {
  text-align: center;
}

#pnomdamzqb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#pnomdamzqb .gt_font_normal {
  font-weight: normal;
}

#pnomdamzqb .gt_font_bold {
  font-weight: bold;
}

#pnomdamzqb .gt_font_italic {
  font-style: italic;
}

#pnomdamzqb .gt_super {
  font-size: 65%;
}

#pnomdamzqb .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#pnomdamzqb .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#pnomdamzqb .gt_indent_1 {
  text-indent: 5px;
}

#pnomdamzqb .gt_indent_2 {
  text-indent: 10px;
}

#pnomdamzqb .gt_indent_3 {
  text-indent: 15px;
}

#pnomdamzqb .gt_indent_4 {
  text-indent: 20px;
}

#pnomdamzqb .gt_indent_5 {
  text-indent: 25px;
}

#pnomdamzqb .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#pnomdamzqb div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="2" class="gt_heading gt_title gt_font_normal" style="font-family: mono">Top 5 películas Marvel - Recaudación mundial</td>
</tr>
<tr class="gt_heading even">
<td colspan="2" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="font-family: mono">(en millones de dólares)</td>
</tr>
<tr class="gt_col_headings header">
<th id="movie" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-family: mono" scope="col">Película</th>
<th id="recaudacion_taquilla" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-family: mono" scope="col">Recaudación</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="movie" style="font-family: mono">Avengers: End Game</td>
<td class="gt_row gt_right" headers="recaudacion_taquilla" style="font-family: mono">$2,797</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="movie" style="font-family: mono">Avengers: Infinity War</td>
<td class="gt_row gt_right" headers="recaudacion_taquilla" style="font-family: mono">$2,048</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="movie" style="font-family: mono">Spider-Man: No Way Home</td>
<td class="gt_row gt_right" headers="recaudacion_taquilla" style="font-family: mono">$1,911</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="movie" style="font-family: mono">The Avengers</td>
<td class="gt_row gt_right" headers="recaudacion_taquilla" style="font-family: mono">$1,515</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="movie" style="font-family: mono">Avengers: Age of Ultron</td>
<td class="gt_row gt_right" headers="recaudacion_taquilla" style="font-family: mono">$1,395</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Finalmente, compararemos el top 5 películas más valoradas por la audiencia con las más valoradas por los críticos.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a></span>
<span id="cb10-2"><a href="#cb10-2"></a>top5audiencia <span class="ot">&lt;-</span> df_movies <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">audience % score</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-5"><a href="#cb10-5"></a>  <span class="fu">rename</span>(<span class="at">audiencia =</span> <span class="st">`</span><span class="at">audience % score</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-6"><a href="#cb10-6"></a>  <span class="fu">select</span>(movie, audiencia)</span>
<span id="cb10-7"><a href="#cb10-7"></a></span>
<span id="cb10-8"><a href="#cb10-8"></a>top5aud_tabla<span class="ot">&lt;-</span> top5audiencia <span class="sc">%&gt;%</span></span>
<span id="cb10-9"><a href="#cb10-9"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-10"><a href="#cb10-10"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb10-11"><a href="#cb10-11"></a>    <span class="at">title =</span> <span class="st">"Top 5 películas Marvel - Mejor valoradas por la audiencia"</span>,</span>
<span id="cb10-12"><a href="#cb10-12"></a>    <span class="at">subtitle =</span> <span class="st">"(en porcentaje)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-13"><a href="#cb10-13"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb10-14"><a href="#cb10-14"></a>    <span class="at">movie =</span> <span class="st">"Película"</span>,</span>
<span id="cb10-15"><a href="#cb10-15"></a>    <span class="at">audiencia =</span> <span class="st">"Porcentaje"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-16"><a href="#cb10-16"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb10-17"><a href="#cb10-17"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb10-18"><a href="#cb10-18"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb10-19"><a href="#cb10-19"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb10-20"><a href="#cb10-20"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb10-21"><a href="#cb10-21"></a>    <span class="at">locations =</span> <span class="fu">cells_title</span>(<span class="at">groups =</span> <span class="fu">c</span>(<span class="st">"title"</span>, <span class="st">"subtitle"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb10-22"><a href="#cb10-22"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb10-23"><a href="#cb10-23"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb10-24"><a href="#cb10-24"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb10-25"><a href="#cb10-25"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb10-26"><a href="#cb10-26"></a>    <span class="at">table.background.color =</span> <span class="st">"#FFF6ED"</span>)</span>
<span id="cb10-27"><a href="#cb10-27"></a></span>
<span id="cb10-28"><a href="#cb10-28"></a>top5aud_tabla</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div id="hqjyepkgit" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#hqjyepkgit table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#hqjyepkgit thead, #hqjyepkgit tbody, #hqjyepkgit tfoot, #hqjyepkgit tr, #hqjyepkgit td, #hqjyepkgit th {
  border-style: none;
}

#hqjyepkgit p {
  margin: 0;
  padding: 0;
}

#hqjyepkgit .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFF6ED;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hqjyepkgit .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#hqjyepkgit .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFF6ED;
  border-bottom-width: 0;
}

#hqjyepkgit .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFF6ED;
  border-top-width: 0;
}

#hqjyepkgit .gt_heading {
  background-color: #FFF6ED;
  text-align: center;
  border-bottom-color: #FFF6ED;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hqjyepkgit .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hqjyepkgit .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hqjyepkgit .gt_col_heading {
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hqjyepkgit .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hqjyepkgit .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hqjyepkgit .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hqjyepkgit .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hqjyepkgit .gt_spanner_row {
  border-bottom-style: hidden;
}

#hqjyepkgit .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#hqjyepkgit .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hqjyepkgit .gt_from_md > :first-child {
  margin-top: 0;
}

#hqjyepkgit .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hqjyepkgit .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hqjyepkgit .gt_stub {
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#hqjyepkgit .gt_stub_row_group {
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#hqjyepkgit .gt_row_group_first td {
  border-top-width: 2px;
}

#hqjyepkgit .gt_row_group_first th {
  border-top-width: 2px;
}

#hqjyepkgit .gt_summary_row {
  color: #333333;
  background-color: #FFF6ED;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hqjyepkgit .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#hqjyepkgit .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#hqjyepkgit .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hqjyepkgit .gt_grand_summary_row {
  color: #333333;
  background-color: #FFF6ED;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hqjyepkgit .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hqjyepkgit .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#hqjyepkgit .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hqjyepkgit .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hqjyepkgit .gt_footnotes {
  color: #333333;
  background-color: #FFF6ED;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hqjyepkgit .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hqjyepkgit .gt_sourcenotes {
  color: #333333;
  background-color: #FFF6ED;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hqjyepkgit .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hqjyepkgit .gt_left {
  text-align: left;
}

#hqjyepkgit .gt_center {
  text-align: center;
}

#hqjyepkgit .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hqjyepkgit .gt_font_normal {
  font-weight: normal;
}

#hqjyepkgit .gt_font_bold {
  font-weight: bold;
}

#hqjyepkgit .gt_font_italic {
  font-style: italic;
}

#hqjyepkgit .gt_super {
  font-size: 65%;
}

#hqjyepkgit .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#hqjyepkgit .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#hqjyepkgit .gt_indent_1 {
  text-indent: 5px;
}

#hqjyepkgit .gt_indent_2 {
  text-indent: 10px;
}

#hqjyepkgit .gt_indent_3 {
  text-indent: 15px;
}

#hqjyepkgit .gt_indent_4 {
  text-indent: 20px;
}

#hqjyepkgit .gt_indent_5 {
  text-indent: 25px;
}

#hqjyepkgit .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#hqjyepkgit div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="2" class="gt_heading gt_title gt_font_normal" style="font-family: mono">Top 5 películas Marvel - Mejor valoradas por la audiencia</td>
</tr>
<tr class="gt_heading even">
<td colspan="2" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="font-family: mono">(en porcentaje)</td>
</tr>
<tr class="gt_col_headings header">
<th id="movie" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-family: mono" scope="col">Película</th>
<th id="audiencia" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-family: mono" scope="col">Porcentaje</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="movie" style="font-family: mono">Spider-Man: No Way Home</td>
<td class="gt_row gt_right" headers="audiencia" style="font-family: mono">96%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="movie" style="font-family: mono">Guardians of the Galaxy Vol. 3</td>
<td class="gt_row gt_right" headers="audiencia" style="font-family: mono">95%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="movie" style="font-family: mono">Black Panther 2</td>
<td class="gt_row gt_right" headers="audiencia" style="font-family: mono">94%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="movie" style="font-family: mono">Spider-Man: Across the Spider-Verse</td>
<td class="gt_row gt_right" headers="audiencia" style="font-family: mono">94%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="movie" style="font-family: mono">Shang-Chi</td>
<td class="gt_row gt_right" headers="audiencia" style="font-family: mono">93%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>top5criticos <span class="ot">&lt;-</span> df_movies <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">critics % score</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>  <span class="fu">rename</span>(<span class="at">criticos =</span> <span class="st">`</span><span class="at">critics % score</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>  <span class="fu">select</span>(movie, criticos)</span>
<span id="cb11-6"><a href="#cb11-6"></a></span>
<span id="cb11-7"><a href="#cb11-7"></a>top5crit_tabla<span class="ot">&lt;-</span> top5criticos <span class="sc">%&gt;%</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb11-9"><a href="#cb11-9"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb11-10"><a href="#cb11-10"></a>    <span class="at">title =</span> <span class="st">"Top 5 películas Marvel - Mejor valoradas por los críticos"</span>,</span>
<span id="cb11-11"><a href="#cb11-11"></a>    <span class="at">subtitle =</span> <span class="st">"(en porcentaje)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-12"><a href="#cb11-12"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb11-13"><a href="#cb11-13"></a>    <span class="at">movie =</span> <span class="st">"Película"</span>,</span>
<span id="cb11-14"><a href="#cb11-14"></a>    <span class="at">criticos =</span> <span class="st">"Porcentaje"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-15"><a href="#cb11-15"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb11-16"><a href="#cb11-16"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb11-17"><a href="#cb11-17"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb11-18"><a href="#cb11-18"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb11-19"><a href="#cb11-19"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb11-20"><a href="#cb11-20"></a>    <span class="at">locations =</span> <span class="fu">cells_title</span>(<span class="at">groups =</span> <span class="fu">c</span>(<span class="st">"title"</span>, <span class="st">"subtitle"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb11-21"><a href="#cb11-21"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb11-22"><a href="#cb11-22"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb11-23"><a href="#cb11-23"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb11-24"><a href="#cb11-24"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb11-25"><a href="#cb11-25"></a>    <span class="at">table.background.color =</span> <span class="st">"#FFF6ED"</span>)</span>
<span id="cb11-26"><a href="#cb11-26"></a></span>
<span id="cb11-27"><a href="#cb11-27"></a>top5crit_tabla</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div id="dtpiwqjbzu" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#dtpiwqjbzu table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#dtpiwqjbzu thead, #dtpiwqjbzu tbody, #dtpiwqjbzu tfoot, #dtpiwqjbzu tr, #dtpiwqjbzu td, #dtpiwqjbzu th {
  border-style: none;
}

#dtpiwqjbzu p {
  margin: 0;
  padding: 0;
}

#dtpiwqjbzu .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFF6ED;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#dtpiwqjbzu .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#dtpiwqjbzu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFF6ED;
  border-bottom-width: 0;
}

#dtpiwqjbzu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFF6ED;
  border-top-width: 0;
}

#dtpiwqjbzu .gt_heading {
  background-color: #FFF6ED;
  text-align: center;
  border-bottom-color: #FFF6ED;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dtpiwqjbzu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dtpiwqjbzu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dtpiwqjbzu .gt_col_heading {
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#dtpiwqjbzu .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#dtpiwqjbzu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#dtpiwqjbzu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#dtpiwqjbzu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#dtpiwqjbzu .gt_spanner_row {
  border-bottom-style: hidden;
}

#dtpiwqjbzu .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#dtpiwqjbzu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#dtpiwqjbzu .gt_from_md > :first-child {
  margin-top: 0;
}

#dtpiwqjbzu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#dtpiwqjbzu .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#dtpiwqjbzu .gt_stub {
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#dtpiwqjbzu .gt_stub_row_group {
  color: #333333;
  background-color: #FFF6ED;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#dtpiwqjbzu .gt_row_group_first td {
  border-top-width: 2px;
}

#dtpiwqjbzu .gt_row_group_first th {
  border-top-width: 2px;
}

#dtpiwqjbzu .gt_summary_row {
  color: #333333;
  background-color: #FFF6ED;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dtpiwqjbzu .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#dtpiwqjbzu .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#dtpiwqjbzu .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dtpiwqjbzu .gt_grand_summary_row {
  color: #333333;
  background-color: #FFF6ED;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dtpiwqjbzu .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#dtpiwqjbzu .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#dtpiwqjbzu .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#dtpiwqjbzu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dtpiwqjbzu .gt_footnotes {
  color: #333333;
  background-color: #FFF6ED;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dtpiwqjbzu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dtpiwqjbzu .gt_sourcenotes {
  color: #333333;
  background-color: #FFF6ED;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dtpiwqjbzu .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dtpiwqjbzu .gt_left {
  text-align: left;
}

#dtpiwqjbzu .gt_center {
  text-align: center;
}

#dtpiwqjbzu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#dtpiwqjbzu .gt_font_normal {
  font-weight: normal;
}

#dtpiwqjbzu .gt_font_bold {
  font-weight: bold;
}

#dtpiwqjbzu .gt_font_italic {
  font-style: italic;
}

#dtpiwqjbzu .gt_super {
  font-size: 65%;
}

#dtpiwqjbzu .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#dtpiwqjbzu .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#dtpiwqjbzu .gt_indent_1 {
  text-indent: 5px;
}

#dtpiwqjbzu .gt_indent_2 {
  text-indent: 10px;
}

#dtpiwqjbzu .gt_indent_3 {
  text-indent: 15px;
}

#dtpiwqjbzu .gt_indent_4 {
  text-indent: 20px;
}

#dtpiwqjbzu .gt_indent_5 {
  text-indent: 25px;
}

#dtpiwqjbzu .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#dtpiwqjbzu div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<td colspan="2" class="gt_heading gt_title gt_font_normal" style="font-family: mono">Top 5 películas Marvel - Mejor valoradas por los críticos</td>
</tr>
<tr class="gt_heading even">
<td colspan="2" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="font-family: mono">(en porcentaje)</td>
</tr>
<tr class="gt_col_headings header">
<th id="movie" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-family: mono" scope="col">Película</th>
<th id="criticos" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-family: mono" scope="col">Porcentaje</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="movie" style="font-family: mono">Black Panther</td>
<td class="gt_row gt_right" headers="criticos" style="font-family: mono">96%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="movie" style="font-family: mono">Spider-Man: Across the Spider-Verse</td>
<td class="gt_row gt_right" headers="criticos" style="font-family: mono">96%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="movie" style="font-family: mono">Avengers: End Game</td>
<td class="gt_row gt_right" headers="criticos" style="font-family: mono">94%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="movie" style="font-family: mono">Iron Man</td>
<td class="gt_row gt_right" headers="criticos" style="font-family: mono">94%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="movie" style="font-family: mono">Spider-Man: No Way Home</td>
<td class="gt_row gt_right" headers="criticos" style="font-family: mono">93%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Con esta comparación podemos observar que las películas más aclamadas por la audiencia no coinciden con la valoración de los críticos a excepción de las dos películas de Spider-man lo cual, desde mi punto de vista, es un acierto puesto que a nivel de producción y trama son muy buenos largometrajes.</p>
<hr></section><section id="otro-gráfico.-apariciones-en-cómics-y-películas." class="level3"><h3 class="anchored" data-anchor-id="otro-gráfico.-apariciones-en-cómics-y-películas.">Otro gráfico. Apariciones en cómics y películas.</h3>
<p>Este gráfico muestra el número de apariciones que han tenido los personajes. En este caso, hemos pedido los cinco con mayor frecuencia entre los cuales encontramos a Spider-Man y el Capitán América.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co">#- tercer gráfico</span></span>
<span id="cb12-2"><a href="#cb12-2"></a></span>
<span id="cb12-3"><a href="#cb12-3"></a>apariciones <span class="ot">&lt;-</span> df_personajes <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>   <span class="fu">mutate</span>(<span class="at">Appearances =</span> <span class="fu">as.numeric</span>(Appearances),            </span>
<span id="cb12-5"><a href="#cb12-5"></a>         <span class="at">Appearances =</span> <span class="fu">if_else</span>(<span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"_Jr._(Earth-616)#"</span>, <span class="dv">0</span>, Appearances))</span>
<span id="cb12-6"><a href="#cb12-6"></a></span>
<span id="cb12-7"><a href="#cb12-7"></a>p <span class="ot">&lt;-</span> apariciones  <span class="sc">%&gt;%</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>  <span class="fu">filter</span> (Appearances <span class="sc">&gt;=</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-9"><a href="#cb12-9"></a>  <span class="fu">slice_max</span>(Appearances, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-10"><a href="#cb12-10"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>, Appearances, <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb12-11"><a href="#cb12-11"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb12-12"><a href="#cb12-12"></a>  <span class="fu">theme_gray</span>(<span class="at">base_family =</span> <span class="st">"mono"</span>) <span class="sc">+</span></span>
<span id="cb12-13"><a href="#cb12-13"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>, </span>
<span id="cb12-14"><a href="#cb12-14"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">15</span>,</span>
<span id="cb12-15"><a href="#cb12-15"></a>                                   <span class="at">vjust=</span><span class="dv">2</span>,</span>
<span id="cb12-16"><a href="#cb12-16"></a>                                   <span class="at">face=</span><span class="st">"bold"</span>)) <span class="sc">+</span></span>
<span id="cb12-17"><a href="#cb12-17"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> paleta_discreta) <span class="sc">+</span> </span>
<span id="cb12-18"><a href="#cb12-18"></a>  <span class="fu">labs</span>(</span>
<span id="cb12-19"><a href="#cb12-19"></a>    <span class="at">title =</span> <span class="st">"Apariciones de personajes (aprox.)"</span>) </span>
<span id="cb12-20"><a href="#cb12-20"></a></span>
<span id="cb12-21"><a href="#cb12-21"></a><span class="fu">ggplotly</span>(p)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-7a781ce795e8c2925ab2" style="width:95%;height:1500px;"></div>
<script type="application/json" data-for="htmlwidget-7a781ce795e8c2925ab2">{"x":{"data":[{"x":[1],"y":[3068],"text":"Name/Alias: Anthony Edward \"\"Tony\"\" Stark<br />Appearances: 3068<br />size: 2.5<br />Name/Alias: Anthony Edward \"\"Tony\"\" Stark","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(158,61,34,1)","opacity":1,"size":17.142175392501688,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(158,61,34,1)"}},"hoveron":"points","name":"Anthony Edward \"\"Tony\"\" Stark","legendgroup":"Anthony Edward \"\"Tony\"\" Stark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2],"y":[3130],"text":"Name/Alias: James \"\"Logan\"\" Howlett<br />Appearances: 3130<br />size: 2.5<br />Name/Alias: James \"\"Logan\"\" Howlett","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(233,117,43,1)","opacity":1,"size":17.142175392501688,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(233,117,43,1)"}},"hoveron":"points","name":"James \"\"Logan\"\" Howlett","legendgroup":"James \"\"Logan\"\" Howlett","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3],"y":[4333],"text":"Name/Alias: Peter Benjamin Parker<br />Appearances: 4333<br />size: 2.5<br />Name/Alias: Peter Benjamin Parker","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(255,205,151,1)","opacity":1,"size":17.142175392501688,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(255,205,151,1)"}},"hoveron":"points","name":"Peter Benjamin Parker","legendgroup":"Peter Benjamin Parker","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4],"y":[3458],"text":"Name/Alias: Steven Rogers<br />Appearances: 3458<br />size: 2.5<br />Name/Alias: Steven Rogers","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(193,220,237,1)","opacity":1,"size":17.142175392501688,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(193,220,237,1)"}},"hoveron":"points","name":"Steven Rogers","legendgroup":"Steven Rogers","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[5],"y":[2402],"text":"Name/Alias: Thor Odinson<br />Appearances: 2402<br />size: 2.5<br />Name/Alias: Thor Odinson","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(103,154,195,1)","opacity":1,"size":17.142175392501688,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(103,154,195,1)"}},"hoveron":"points","name":"Thor Odinson","legendgroup":"Thor Odinson","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.231216272312167,"r":7.3059360730593621,"b":37.260273972602747,"l":48.949771689497723},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"mono","size":14.611872146118724},"title":{"text":"<b> Apariciones de personajes (aprox.) <\/b>","font":{"color":"rgba(0,0,0,1)","family":"mono","size":19.925280199252807},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["Anthony Edward \"\"Tony\"\" Stark","James \"\"Logan\"\" Howlett","Peter Benjamin Parker","Steven Rogers","Thor Odinson"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["Anthony Edward \"\"Tony\"\" Stark","James \"\"Logan\"\" Howlett","Peter Benjamin Parker","Steven Rogers","Thor Odinson"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"mono","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"Name/Alias","font":{"color":"rgba(0,0,0,1)","family":"mono","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2305.4499999999998,4429.5500000000002],"tickmode":"array","ticktext":["2500","3000","3500","4000"],"tickvals":[2500,3000,3500,4000],"categoryorder":"array","categoryarray":["2500","3000","3500","4000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"mono","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"Appearances","font":{"color":"rgba(0,0,0,1)","family":"mono","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"mono","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"67f0399a4ab7":{"x":{},"y":{},"size":{},"colour":{},"type":"scatter"}},"cur_data":"67f0399a4ab7","visdat":{"67f0399a4ab7":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<hr></section><section id="cuál-es-la-película-más-larga-a-qué-fase-pertenece" class="level3"><h3 class="anchored" data-anchor-id="cuál-es-la-película-más-larga-a-qué-fase-pertenece">¿Cuál es la película más larga? ¿A qué fase pertenece?</h3>
<p>En este apartado veremos las distintas duraciones que tienen las películas del MCU y qué fase es la que más películas tiene. Además, obtendremos cuál es la película más larga.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>df_treemap <span class="ot">&lt;-</span> df_fases <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(runtime_min)) <span class="sc">%&gt;%</span>   <span class="co"># quitamos NAs</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">mutate</span>(</span>
<span id="cb13-4"><a href="#cb13-4"></a>    <span class="at">runtime_min =</span> <span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(runtime_min, <span class="st">"^</span><span class="sc">\\</span><span class="st">d+"</span>)))</span>
<span id="cb13-5"><a href="#cb13-5"></a></span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="fu">treemap</span>(</span>
<span id="cb13-7"><a href="#cb13-7"></a>  df_treemap,</span>
<span id="cb13-8"><a href="#cb13-8"></a>  <span class="at">index =</span> <span class="fu">c</span>(<span class="st">"Phase"</span>, <span class="st">"Film"</span>),</span>
<span id="cb13-9"><a href="#cb13-9"></a>  <span class="at">vSize =</span> <span class="st">"runtime_min"</span>,</span>
<span id="cb13-10"><a href="#cb13-10"></a>  <span class="at">vColor =</span> <span class="st">"runtime_min"</span>,</span>
<span id="cb13-11"><a href="#cb13-11"></a>  <span class="at">type =</span> <span class="st">"value"</span>,</span>
<span id="cb13-12"><a href="#cb13-12"></a>  <span class="at">palette =</span> <span class="st">"RdYlBu"</span>,</span>
<span id="cb13-13"><a href="#cb13-13"></a>  <span class="at">fontsize.labels =</span> <span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">11</span>),</span>
<span id="cb13-14"><a href="#cb13-14"></a>  <span class="at">fontcolor.labels =</span> <span class="fu">c</span>(<span class="st">"white"</span>, <span class="st">"black"</span>)</span>
<span id="cb13-15"><a href="#cb13-15"></a>)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-14-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Como podemos observar, <em>Avengers: Endgame</em> es la más larga y pertenece a la fase 3.</p>
<hr></section><section id="cartelera" class="level3"><h3 class="anchored" data-anchor-id="cartelera">Cartelera</h3>
<p>Finalmente, acabaremos este trabajo mostrando un gráfico en el que se muestre el número de películas que se han estrenado en los diferentes años.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a></span>
<span id="cb14-2"><a href="#cb14-2"></a>df_plotline <span class="ot">&lt;-</span> df_fases <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>  <span class="fu">group_by</span>(release_year) <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>  <span class="fu">summarise</span>(</span>
<span id="cb14-5"><a href="#cb14-5"></a>    <span class="at">n_peliculas =</span> <span class="fu">n</span>(),</span>
<span id="cb14-6"><a href="#cb14-6"></a>    <span class="at">peliculas =</span> <span class="fu">paste</span>(Film, <span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb14-7"><a href="#cb14-7"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb14-8"><a href="#cb14-8"></a>  <span class="fu">mutate</span>(<span class="at">release_year =</span> <span class="fu">as.numeric</span>(release_year)) </span>
<span id="cb14-9"><a href="#cb14-9"></a></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="co"># Gráfico con línea y puntos</span></span>
<span id="cb14-11"><a href="#cb14-11"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_plotline, <span class="fu">aes</span>(<span class="at">x =</span> release_year, <span class="at">y =</span> n_peliculas,</span>
<span id="cb14-12"><a href="#cb14-12"></a>                             <span class="at">text =</span> <span class="fu">paste0</span>(<span class="st">"Año: "</span>, release_year,</span>
<span id="cb14-13"><a href="#cb14-13"></a>                                           <span class="st">"&lt;br&gt;Películas:</span><span class="sc">\n</span><span class="st">"</span>, peliculas))) <span class="sc">+</span></span>
<span id="cb14-14"><a href="#cb14-14"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"#8c0018"</span> , <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb14-15"><a href="#cb14-15"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"#720014"</span> , <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb14-16"><a href="#cb14-16"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">"mono"</span>) <span class="sc">+</span></span>
<span id="cb14-17"><a href="#cb14-17"></a>  <span class="fu">xlab</span>(<span class="st">"Año de estreno"</span>) <span class="sc">+</span></span>
<span id="cb14-18"><a href="#cb14-18"></a>  <span class="fu">ylab</span>(<span class="st">"Cantidad de películas"</span>) <span class="sc">+</span></span>
<span id="cb14-19"><a href="#cb14-19"></a>  <span class="fu">theme</span>(</span>
<span id="cb14-20"><a href="#cb14-20"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-21"><a href="#cb14-21"></a>    <span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>())</span>
<span id="cb14-22"><a href="#cb14-22"></a></span>
<span id="cb14-23"><a href="#cb14-23"></a><span class="co"># Convertir a interactivo</span></span>
<span id="cb14-24"><a href="#cb14-24"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-edd519ed7a84884fe20f" style="width:95%;height:1500px;"></div>
<script type="application/json" data-for="htmlwidget-edd519ed7a84884fe20f">{"x":{"data":[{"x":[2008,2010,2011,2013,2014,2015,2016,2017,2018,2019,2021,null],"y":[2,1,2,2,2,2,2,3,3,3,4,6],"text":["Año: 2008<br>Películas:<br />Iron Man<br />The Incredible Hulk","Año: 2010<br>Películas:<br />Iron Man 2","Año: 2011<br>Películas:<br />Thor<br />Captain America: The First Avenger","Año: 2013<br>Películas:<br />Iron Man 3<br />Thor: The Dark World","Año: 2014<br>Películas:<br />Captain America: The Winter Soldier<br />Guardians of the Galaxy","Año: 2015<br>Películas:<br />Avengers: Age of Ultron<br />Ant-Man","Año: 2016<br>Películas:<br />Captain America: Civil War<br />Doctor Strange","Año: 2017<br>Películas:<br />Guardians of the Galaxy Vol. 2<br />Spider-Man: Homecoming<br />Thor: Ragnarok","Año: 2018<br>Películas:<br />Black Panther<br />Avengers: Infinity War<br />Ant-Man and the Wasp","Año: 2019<br>Películas:<br />Captain Marvel<br />Avengers: Endgame<br />Spider-Man: Far From Home","Año: 2021<br>Películas:<br />Black Widow<br />Shang-Chi and the Legend of the Ten Rings<br />Eternals<br />Spider-Man: No Way Home","Año: NA<br>Películas:<br />Marvel's The Avengers<br />Doctor Strange in the Multiverse of Madness<br />Thor: Love and Thunder<br />Black Panther: Wakanda Forever<br />Ant-Man and the Wasp: Quantumania<br />Guardians of the Galaxy Vol. 3"],"type":"scatter","mode":"lines+markers","line":{"width":3.7795275590551185,"color":"rgba(140,0,24,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(114,0,20,1)","opacity":1,"size":15.118110236220474,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(114,0,20,1)"}},"frame":null}],"layout":{"margin":{"t":23.305936073059364,"r":7.3059360730593621,"b":37.260273972602747,"l":31.415525114155255},"paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"mono","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2007.3499999999999,2021.6500000000001],"tickmode":"array","ticktext":["2010","2013","2016","2019"],"tickvals":[2010,2013,2016,2019],"categoryorder":"array","categoryarray":["2010","2013","2016","2019"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"mono","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"Año de estreno","font":{"color":"rgba(0,0,0,1)","family":"mono","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.75,6.25],"tickmode":"array","ticktext":["2","4","6"],"tickvals":[2,4,6],"categoryorder":"array","categoryarray":["2","4","6"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"mono","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"Cantidad de películas","font":{"color":"rgba(0,0,0,1)","family":"mono","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"mono","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"67f07f3a41c4":{"x":{},"y":{},"text":{},"type":"scatter"},"67f065b23837":{"x":{},"y":{},"text":{}}},"cur_data":"67f07f3a41c4","visdat":{"67f07f3a41c4":["function (y) ","x"],"67f065b23837":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<hr>
<p><br></p>
<p>Con esto acabo mi trabajo para BigData ;)</p>
<p>(<strong>wakanda forever</strong>)</p>
<p><br></p>
<hr>
<p><br></p>
</section><section id="información-sobre-la-sesión" class="level3"><h3 class="anchored" data-anchor-id="información-sobre-la-sesión">Información sobre la sesión</h3>
<p>Abajo muestro mi entorno de trabajo y paquetes utilizados</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<details closed=""><summary><span title="Click to Expand"> current session info </span>
</summary><div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a></span>
<span id="cb15-2"><a href="#cb15-2"></a>─ Session info ───────────────────────────────────────────────────────────────</span>
<span id="cb15-3"><a href="#cb15-3"></a> setting  value</span>
<span id="cb15-4"><a href="#cb15-4"></a> version  R version <span class="dv">4</span>.<span class="fl">5.1</span> (<span class="dv">2025-06-13</span> ucrt)</span>
<span id="cb15-5"><a href="#cb15-5"></a> os       Windows <span class="dv">11</span> <span class="fu">x64</span> (build <span class="dv">26200</span>)</span>
<span id="cb15-6"><a href="#cb15-6"></a> system   x86_64, mingw32</span>
<span id="cb15-7"><a href="#cb15-7"></a> ui       RTerm</span>
<span id="cb15-8"><a href="#cb15-8"></a> <span class="fu">language</span> (EN)</span>
<span id="cb15-9"><a href="#cb15-9"></a> collate  Spanish_Spain.utf8</span>
<span id="cb15-10"><a href="#cb15-10"></a> ctype    Spanish_Spain.utf8</span>
<span id="cb15-11"><a href="#cb15-11"></a> tz       Europe<span class="sc">/</span>Madrid</span>
<span id="cb15-12"><a href="#cb15-12"></a> date     <span class="dv">2026-01-03</span></span>
<span id="cb15-13"><a href="#cb15-13"></a> pandoc   <span class="fl">3.4</span> <span class="sc">@</span> C<span class="sc">:</span><span class="er">/</span>Users<span class="sc">/</span>Arantxa<span class="sc">/</span>RStudio<span class="sc">/</span>resources<span class="sc">/</span>app<span class="sc">/</span>bin<span class="sc">/</span>quarto<span class="sc">/</span>bin<span class="sc">/</span>tools<span class="sc">/</span> (via rmarkdown)</span>
<span id="cb15-14"><a href="#cb15-14"></a> quarto   <span class="cn">NA</span> <span class="sc">@</span> C<span class="sc">:</span>\\Users\\Arantxa\\AppData\\Local\\Programs\\Quarto\\bin\\quarto.exe</span>
<span id="cb15-15"><a href="#cb15-15"></a></span>
<span id="cb15-16"><a href="#cb15-16"></a>─ Packages ───────────────────────────────────────────────────────────────────</span>
<span id="cb15-17"><a href="#cb15-17"></a> package           <span class="sc">*</span> version <span class="fu">date</span> (UTC) lib source</span>
<span id="cb15-18"><a href="#cb15-18"></a> bit                 <span class="dv">4</span>.<span class="fl">6.0</span>   <span class="dv">2025-03-06</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-19"><a href="#cb15-19"></a> bit64               <span class="dv">4</span>.<span class="fl">6.0</span><span class="dv">-1</span> <span class="dv">2025-01-16</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-20"><a href="#cb15-20"></a> cli                 <span class="dv">3</span>.<span class="fl">6.5</span>   <span class="dv">2025-04-23</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-21"><a href="#cb15-21"></a> clipr               <span class="dv">0</span>.<span class="fl">8.0</span>   <span class="dv">2022-02-22</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-22"><a href="#cb15-22"></a> colorspace          <span class="fl">2.1</span><span class="dv">-2</span>   <span class="dv">2025-09-22</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-23"><a href="#cb15-23"></a> crosstalk           <span class="dv">1</span>.<span class="fl">2.2</span>   <span class="dv">2025-08-26</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-24"><a href="#cb15-24"></a> data.table          <span class="dv">1</span>.<span class="fl">17.8</span>  <span class="dv">2025-07-10</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-25"><a href="#cb15-25"></a> desc                <span class="dv">1</span>.<span class="fl">4.3</span>   <span class="dv">2023-12-10</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-26"><a href="#cb15-26"></a> details             <span class="dv">0</span>.<span class="fl">4.0</span>   <span class="dv">2025-02-09</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.2</span>)</span>
<span id="cb15-27"><a href="#cb15-27"></a> digest              <span class="dv">0</span>.<span class="fl">6.37</span>  <span class="dv">2024-08-19</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-28"><a href="#cb15-28"></a> dplyr             <span class="sc">*</span> <span class="dv">1</span>.<span class="fl">1.4</span>   <span class="dv">2023-11-17</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-29"><a href="#cb15-29"></a> evaluate            <span class="dv">1</span>.<span class="fl">0.5</span>   <span class="dv">2025-08-27</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-30"><a href="#cb15-30"></a> farver              <span class="dv">2</span>.<span class="fl">1.2</span>   <span class="dv">2024-05-13</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-31"><a href="#cb15-31"></a> fastmap             <span class="dv">1</span>.<span class="fl">2.0</span>   <span class="dv">2024-05-15</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-32"><a href="#cb15-32"></a> fontBitstreamVera   <span class="dv">0</span>.<span class="fl">1.1</span>   <span class="dv">2017-02-01</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.2</span>)</span>
<span id="cb15-33"><a href="#cb15-33"></a> fontLiberation      <span class="dv">0</span>.<span class="fl">1.0</span>   <span class="dv">2016-10-15</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.2</span>)</span>
<span id="cb15-34"><a href="#cb15-34"></a> fontquiver          <span class="dv">0</span>.<span class="fl">2.1</span>   <span class="dv">2017-02-01</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.2</span>)</span>
<span id="cb15-35"><a href="#cb15-35"></a> forcats           <span class="sc">*</span> <span class="dv">1</span>.<span class="fl">0.0</span>   <span class="dv">2023-01-29</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-36"><a href="#cb15-36"></a> fs                  <span class="dv">1</span>.<span class="fl">6.6</span>   <span class="dv">2025-04-12</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-37"><a href="#cb15-37"></a> gdtools             <span class="dv">0</span>.<span class="fl">4.4</span>   <span class="dv">2025-10-06</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.2</span>)</span>
<span id="cb15-38"><a href="#cb15-38"></a> generics            <span class="dv">0</span>.<span class="fl">1.4</span>   <span class="dv">2025-05-09</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-39"><a href="#cb15-39"></a> ggfun               <span class="dv">0</span>.<span class="fl">2.0</span>   <span class="dv">2025-07-15</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.2</span>)</span>
<span id="cb15-40"><a href="#cb15-40"></a> ggimage           <span class="sc">*</span> <span class="dv">0</span>.<span class="fl">3.4</span>   <span class="dv">2025-08-24</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.2</span>)</span>
<span id="cb15-41"><a href="#cb15-41"></a> ggiraph             <span class="dv">0</span>.<span class="fl">9.2</span>   <span class="dv">2025-10-07</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.2</span>)</span>
<span id="cb15-42"><a href="#cb15-42"></a> ggplot2           <span class="sc">*</span> <span class="dv">4</span>.<span class="fl">0.0</span>   <span class="dv">2025-09-11</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-43"><a href="#cb15-43"></a> ggplotify           <span class="dv">0</span>.<span class="fl">1.3</span>   <span class="dv">2025-09-20</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.2</span>)</span>
<span id="cb15-44"><a href="#cb15-44"></a> ggthemes            <span class="dv">5</span>.<span class="fl">1.0</span>   <span class="dv">2024-02-10</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-45"><a href="#cb15-45"></a> glue                <span class="dv">1</span>.<span class="fl">8.0</span>   <span class="dv">2024-09-30</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-46"><a href="#cb15-46"></a> gridBase            <span class="fl">0.4</span><span class="dv">-7</span>   <span class="dv">2014-02-24</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.2</span>)</span>
<span id="cb15-47"><a href="#cb15-47"></a> gridGraphics        <span class="fl">0.5</span><span class="dv">-1</span>   <span class="dv">2020-12-13</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-48"><a href="#cb15-48"></a> gt                <span class="sc">*</span> <span class="dv">1</span>.<span class="fl">1.0</span>   <span class="dv">2025-09-23</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-49"><a href="#cb15-49"></a> gtable              <span class="dv">0</span>.<span class="fl">3.6</span>   <span class="dv">2024-10-25</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-50"><a href="#cb15-50"></a> hms                 <span class="dv">1</span>.<span class="fl">1.3</span>   <span class="dv">2023-03-21</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-51"><a href="#cb15-51"></a> htmltools           <span class="dv">0</span>.<span class="dv">5</span>.<span class="fl">8.1</span> <span class="dv">2024-04-04</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-52"><a href="#cb15-52"></a> htmlwidgets         <span class="dv">1</span>.<span class="fl">6.4</span>   <span class="dv">2023-12-06</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-53"><a href="#cb15-53"></a> httpuv              <span class="dv">1</span>.<span class="fl">6.16</span>  <span class="dv">2025-04-16</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-54"><a href="#cb15-54"></a> httr                <span class="dv">1</span>.<span class="fl">4.7</span>   <span class="dv">2023-08-15</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-55"><a href="#cb15-55"></a> igraph              <span class="dv">2</span>.<span class="fl">1.4</span>   <span class="dv">2025-01-23</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-56"><a href="#cb15-56"></a> jsonlite            <span class="dv">2</span>.<span class="fl">0.0</span>   <span class="dv">2025-03-27</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-57"><a href="#cb15-57"></a> knitr               <span class="fl">1.50</span>    <span class="dv">2025-03-16</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-58"><a href="#cb15-58"></a> labeling            <span class="dv">0</span>.<span class="fl">4.3</span>   <span class="dv">2023-08-29</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.0</span>)</span>
<span id="cb15-59"><a href="#cb15-59"></a> later               <span class="dv">1</span>.<span class="fl">4.4</span>   <span class="dv">2025-08-27</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-60"><a href="#cb15-60"></a> lazyeval            <span class="dv">0</span>.<span class="fl">2.2</span>   <span class="dv">2019-03-15</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-61"><a href="#cb15-61"></a> lifecycle           <span class="dv">1</span>.<span class="fl">0.4</span>   <span class="dv">2023-11-07</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-62"><a href="#cb15-62"></a> lubridate         <span class="sc">*</span> <span class="dv">1</span>.<span class="fl">9.4</span>   <span class="dv">2024-12-08</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-63"><a href="#cb15-63"></a> magick            <span class="sc">*</span> <span class="dv">2</span>.<span class="fl">9.0</span>   <span class="dv">2025-09-08</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-64"><a href="#cb15-64"></a> magrittr            <span class="dv">2</span>.<span class="fl">0.4</span>   <span class="dv">2025-09-12</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-65"><a href="#cb15-65"></a> mime                <span class="fl">0.13</span>    <span class="dv">2025-03-17</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.0</span>)</span>
<span id="cb15-66"><a href="#cb15-66"></a> paletteer         <span class="sc">*</span> <span class="dv">1</span>.<span class="fl">6.0</span>   <span class="dv">2024-01-21</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-67"><a href="#cb15-67"></a> pillar              <span class="dv">1</span>.<span class="fl">11.1</span>  <span class="dv">2025-09-17</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-68"><a href="#cb15-68"></a> pkgconfig           <span class="dv">2</span>.<span class="fl">0.3</span>   <span class="dv">2019-09-22</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-69"><a href="#cb15-69"></a> plotly            <span class="sc">*</span> <span class="dv">4</span>.<span class="fl">11.0</span>  <span class="dv">2025-06-19</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-70"><a href="#cb15-70"></a> png                 <span class="fl">0.1</span><span class="dv">-8</span>   <span class="dv">2022-11-29</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.0</span>)</span>
<span id="cb15-71"><a href="#cb15-71"></a> prismatic           <span class="dv">1</span>.<span class="fl">1.2</span>   <span class="dv">2024-04-10</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-72"><a href="#cb15-72"></a> promises            <span class="dv">1</span>.<span class="fl">3.3</span>   <span class="dv">2025-05-29</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-73"><a href="#cb15-73"></a> purrr             <span class="sc">*</span> <span class="dv">1</span>.<span class="fl">1.0</span>   <span class="dv">2025-07-10</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-74"><a href="#cb15-74"></a> R.methodsS3         <span class="dv">1</span>.<span class="fl">8.2</span>   <span class="dv">2022-06-13</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.0</span>)</span>
<span id="cb15-75"><a href="#cb15-75"></a> R.oo                <span class="dv">1</span>.<span class="fl">27.1</span>  <span class="dv">2025-05-02</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.0</span>)</span>
<span id="cb15-76"><a href="#cb15-76"></a> R.utils             <span class="dv">2</span>.<span class="fl">13.0</span>  <span class="dv">2025-02-24</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-77"><a href="#cb15-77"></a> R6                  <span class="dv">2</span>.<span class="fl">6.1</span>   <span class="dv">2025-02-15</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-78"><a href="#cb15-78"></a> rappdirs            <span class="dv">0</span>.<span class="fl">3.3</span>   <span class="dv">2021-01-31</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-79"><a href="#cb15-79"></a> RColorBrewer        <span class="fl">1.1</span><span class="dv">-3</span>   <span class="dv">2022-04-03</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.0</span>)</span>
<span id="cb15-80"><a href="#cb15-80"></a> Rcpp                <span class="dv">1</span>.<span class="fl">1.0</span>   <span class="dv">2025-07-02</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-81"><a href="#cb15-81"></a> readr             <span class="sc">*</span> <span class="dv">2</span>.<span class="fl">1.5</span>   <span class="dv">2024-01-10</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-82"><a href="#cb15-82"></a> rematch2            <span class="dv">2</span>.<span class="fl">1.2</span>   <span class="dv">2020-05-01</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-83"><a href="#cb15-83"></a> rio                 <span class="dv">1</span>.<span class="fl">2.4</span>   <span class="dv">2025-09-26</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-84"><a href="#cb15-84"></a> rlang               <span class="dv">1</span>.<span class="fl">1.6</span>   <span class="dv">2025-04-11</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-85"><a href="#cb15-85"></a> rmarkdown           <span class="fl">2.29</span>    <span class="dv">2024-11-04</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-86"><a href="#cb15-86"></a> rstudioapi          <span class="dv">0</span>.<span class="fl">17.1</span>  <span class="dv">2024-10-22</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-87"><a href="#cb15-87"></a> S7                  <span class="dv">0</span>.<span class="fl">2.0</span>   <span class="dv">2024-11-07</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-88"><a href="#cb15-88"></a> sass                <span class="dv">0</span>.<span class="fl">4.10</span>  <span class="dv">2025-04-11</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-89"><a href="#cb15-89"></a> scales              <span class="dv">1</span>.<span class="fl">4.0</span>   <span class="dv">2025-04-24</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-90"><a href="#cb15-90"></a> sessioninfo         <span class="dv">1</span>.<span class="fl">2.3</span>   <span class="dv">2025-02-05</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-91"><a href="#cb15-91"></a> shiny               <span class="dv">1</span>.<span class="fl">11.1</span>  <span class="dv">2025-07-03</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-92"><a href="#cb15-92"></a> stringi             <span class="dv">1</span>.<span class="fl">8.7</span>   <span class="dv">2025-03-27</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.0</span>)</span>
<span id="cb15-93"><a href="#cb15-93"></a> stringr           <span class="sc">*</span> <span class="dv">1</span>.<span class="fl">5.2</span>   <span class="dv">2025-09-08</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-94"><a href="#cb15-94"></a> systemfonts         <span class="dv">1</span>.<span class="fl">3.1</span>   <span class="dv">2025-10-01</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-95"><a href="#cb15-95"></a> tibble            <span class="sc">*</span> <span class="dv">3</span>.<span class="fl">3.0</span>   <span class="dv">2025-06-08</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-96"><a href="#cb15-96"></a> tidyr             <span class="sc">*</span> <span class="dv">1</span>.<span class="fl">3.1</span>   <span class="dv">2024-01-24</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-97"><a href="#cb15-97"></a> tidyselect          <span class="dv">1</span>.<span class="fl">2.1</span>   <span class="dv">2024-03-11</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-98"><a href="#cb15-98"></a> tidyverse         <span class="sc">*</span> <span class="dv">2</span>.<span class="fl">0.0</span>   <span class="dv">2023-02-22</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-99"><a href="#cb15-99"></a> timechange          <span class="dv">0</span>.<span class="fl">3.0</span>   <span class="dv">2024-01-18</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-100"><a href="#cb15-100"></a> treemap           <span class="sc">*</span> <span class="fl">2.4</span><span class="dv">-4</span>   <span class="dv">2023-05-25</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.2</span>)</span>
<span id="cb15-101"><a href="#cb15-101"></a> tzdb                <span class="dv">0</span>.<span class="fl">5.0</span>   <span class="dv">2025-03-15</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-102"><a href="#cb15-102"></a> vctrs               <span class="dv">0</span>.<span class="fl">6.5</span>   <span class="dv">2023-12-01</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-103"><a href="#cb15-103"></a> viridisLite         <span class="dv">0</span>.<span class="fl">4.2</span>   <span class="dv">2023-05-02</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-104"><a href="#cb15-104"></a> withr               <span class="dv">3</span>.<span class="fl">0.2</span>   <span class="dv">2024-10-28</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-105"><a href="#cb15-105"></a> xfun                <span class="fl">0.53</span>    <span class="dv">2025-08-19</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-106"><a href="#cb15-106"></a> xml2                <span class="dv">1</span>.<span class="fl">4.0</span>   <span class="dv">2025-08-20</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-107"><a href="#cb15-107"></a> xtable              <span class="fl">1.8</span><span class="dv">-4</span>   <span class="dv">2019-04-21</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.1</span>)</span>
<span id="cb15-108"><a href="#cb15-108"></a> yaml                <span class="dv">2</span>.<span class="fl">3.10</span>  <span class="dv">2024-07-26</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.0</span>)</span>
<span id="cb15-109"><a href="#cb15-109"></a> yulab.utils         <span class="dv">0</span>.<span class="fl">2.1</span>   <span class="dv">2025-08-19</span> [<span class="dv">1</span>] <span class="fu">CRAN</span> (R <span class="dv">4</span>.<span class="fl">5.2</span>)</span>
<span id="cb15-110"><a href="#cb15-110"></a></span>
<span id="cb15-111"><a href="#cb15-111"></a> [<span class="dv">1</span>] C<span class="sc">:</span><span class="er">/</span>Users<span class="sc">/</span>Arantxa<span class="sc">/</span>AppData<span class="sc">/</span>Local<span class="sc">/</span>R<span class="sc">/</span>win<span class="sc">-</span>library<span class="sc">/</span><span class="fl">4.5</span></span>
<span id="cb15-112"><a href="#cb15-112"></a> [<span class="dv">2</span>] C<span class="sc">:</span><span class="er">/</span>Program Files<span class="sc">/</span>R<span class="sc">/</span>R<span class="dv">-4</span>.<span class="fl">5.1</span><span class="sc">/</span>library</span>
<span id="cb15-113"><a href="#cb15-113"></a> <span class="sc">*</span> ── Packages attached to the search path.</span>
<span id="cb15-114"><a href="#cb15-114"></a></span>
<span id="cb15-115"><a href="#cb15-115"></a>──────────────────────────────────────────────────────────────────────────────</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><p><br></p>
</div>
</div>


<!-- -->

</section></section><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reutilizar</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.es">CC BY 4.0</a></div></div></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copiada");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copiada");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Ejecutar el código</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb16-1"><a href="#cb16-1"></a><span class="co">---</span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="an">title:</span><span class="co"> "MCU. Un análisis codificado"</span></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="an">description:</span><span class="co"> |</span></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="co">  Un recorrido por las películas y los personajes del Universo Cinematográfico de Marvel</span></span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="an">author:</span></span>
<span id="cb16-6"><a href="#cb16-6"></a><span class="co">  - name: Arantxa Anais Arcos Raimundo</span></span>
<span id="cb16-7"><a href="#cb16-7"></a><span class="co">    affiliation: Universitat de València</span></span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="co">    affiliation-url: https://www.uv.es</span></span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="an">date:</span><span class="co"> 2026-01-02                           #--</span></span>
<span id="cb16-10"><a href="#cb16-10"></a><span class="an">categories:</span><span class="co"> [trabajo BigData, marvel, hérores, películas]   #--</span></span>
<span id="cb16-11"><a href="#cb16-11"></a><span class="an">image:</span><span class="co"> "./imagenes/universo_marvel.jpg"</span></span>
<span id="cb16-12"><a href="#cb16-12"></a><span class="an">title-block-banner:</span><span class="co"> true #- {true, false, "green","#AA0000"}</span></span>
<span id="cb16-13"><a href="#cb16-13"></a><span class="an">title-block-banner-color:</span><span class="co"> "EB1F48"    #-"#FFFFFF" </span></span>
<span id="cb16-14"><a href="#cb16-14"></a><span class="an">toc-depth:</span><span class="co"> 3</span></span>
<span id="cb16-15"><a href="#cb16-15"></a><span class="an">smooth-scroll:</span><span class="co"> true</span></span>
<span id="cb16-16"><a href="#cb16-16"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb16-17"><a href="#cb16-17"></a><span class="co">  html:</span></span>
<span id="cb16-18"><a href="#cb16-18"></a><span class="co">    #backgroundcolor: "#F1F3F4"</span></span>
<span id="cb16-19"><a href="#cb16-19"></a><span class="co">    #embed-resources: true</span></span>
<span id="cb16-20"><a href="#cb16-20"></a><span class="co">    link-external-newwindow: true</span></span>
<span id="cb16-21"><a href="#cb16-21"></a><span class="co">    #css: assets/my_css_file.css   #- CUIDADO!!!!</span></span>
<span id="cb16-22"><a href="#cb16-22"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb16-23"><a href="#cb16-23"></a><span class="an">code-link:</span><span class="co"> true</span></span>
<span id="cb16-24"><a href="#cb16-24"></a><span class="co">---</span></span>
<span id="cb16-25"><a href="#cb16-25"></a></span>
<span id="cb16-26"><a href="#cb16-26"></a><span class="fu">## Motivación</span></span>
<span id="cb16-27"><a href="#cb16-27"></a></span>
<span id="cb16-28"><a href="#cb16-28"></a>El Universo Cinematográfico de Marvel ha cambiado la industria del cine al popularizar el concepto de *multiverso* y *universo compartido*. No se trata solo de películas individuales, sino de una red interconectada de historias donde las acciones de una película afectan a las demás y todas estas están relacionadas.</span>
<span id="cb16-29"><a href="#cb16-29"></a></span>
<span id="cb16-30"><a href="#cb16-30"></a>Así pues, se ha convertido en una de las franquicias cinematográficas más taquillera de la historia, demostrando cómo una saga a largo plazo como lo es la *Saga del infinito* puede mantener el interés del público durante más de una década.</span>
<span id="cb16-31"><a href="#cb16-31"></a></span>
<span id="cb16-32"><a href="#cb16-32"></a>Por ello, el trabajo presente tiene el objetivo de entender y averiguar las distintas características de las películas y personajes de Marvel desde la perspectiva de una fan. </span>
<span id="cb16-33"><a href="#cb16-33"></a></span>
<span id="cb16-34"><a href="#cb16-34"></a>*Así que vamos allá!!*</span>
<span id="cb16-35"><a href="#cb16-35"></a></span>
<span id="cb16-36"><a href="#cb16-36"></a><span class="fu">## Historia del MCU</span></span>
<span id="cb16-37"><a href="#cb16-37"></a></span>
<span id="cb16-38"><a href="#cb16-38"></a>En primer lugar, debemos saber que el UCM es una franquicia de medios centrada en una serie de películas de superhéroes producidas por Marvel Studios, basada en los personajes de Marvel Comics. La saga se divide en fases con dos arcos grandes: la Saga del Infinito y la Saga del Multiverso.</span>
<span id="cb16-39"><a href="#cb16-39"></a></span>
<span id="cb16-40"><a href="#cb16-40"></a>Nos centramos en sobre todo en la *Saga del Infinito* ya que es dónde se encuentra el grupo de *Avengers* el cual estaremos analizando durante todo el trabajo. Cabe mencionar que la película que pone final a la lucha de los vengadores está en la fase tres y es *Avengers: Endgame* (2019).</span>
<span id="cb16-41"><a href="#cb16-41"></a></span>
<span id="cb16-42"><a href="#cb16-42"></a>Por otro lado, la primera película fue *Iron Man* en 2008 y fue dirigida por Jon Favreau. Esta película tiene mucha relevancia ya que fue el inicio de la presentación de héores individuales para posteriormente dar lugar a los Vengadores.</span>
<span id="cb16-43"><a href="#cb16-43"></a></span>
<span id="cb16-44"><a href="#cb16-44"></a>Así pues, en relación con *The Avengers* estos se reunen por primera vez en 2012, año de estreno de la película. El grupo original está formado por:</span>
<span id="cb16-45"><a href="#cb16-45"></a></span>
<span id="cb16-46"><a href="#cb16-46"></a><span class="ss">- </span>Iron Man.</span>
<span id="cb16-47"><a href="#cb16-47"></a><span class="ss">- </span>Captain America.</span>
<span id="cb16-48"><a href="#cb16-48"></a><span class="ss">- </span>Thor.</span>
<span id="cb16-49"><a href="#cb16-49"></a><span class="ss">- </span>Hulk.</span>
<span id="cb16-50"><a href="#cb16-50"></a><span class="ss">- </span>Black Widow.</span>
<span id="cb16-51"><a href="#cb16-51"></a><span class="ss">- </span>Hawkeye.</span>
<span id="cb16-52"><a href="#cb16-52"></a></span>
<span id="cb16-53"><a href="#cb16-53"></a>Sin embargo, cabe mencionar que los personajes aparecidos en la última batalla y que, por tanto, vamos a considerar Vengadores y son los que vamos a analizar son los siguientes:</span>
<span id="cb16-54"><a href="#cb16-54"></a></span>
<span id="cb16-55"><a href="#cb16-55"></a><span class="ss">- </span>Trinidad de Vengadores: Iron Man, Capitán América y Thor.</span>
<span id="cb16-56"><a href="#cb16-56"></a></span>
<span id="cb16-57"><a href="#cb16-57"></a><span class="ss">- </span>Líderes de apoyo: Hulk, Hawkeye, War Machine, Ant-Man, Rocket y Nebula.</span>
<span id="cb16-58"><a href="#cb16-58"></a></span>
<span id="cb16-59"><a href="#cb16-59"></a><span class="ss">- </span>Héroes regresados por portales: Spider-Man, Black Panther, Shuri, Okoye, Falcon, Winter Soldier, Scarlet Witch, Doctor Strange, Wong y Wasp.</span>
<span id="cb16-60"><a href="#cb16-60"></a></span>
<span id="cb16-61"><a href="#cb16-61"></a><span class="ss">- </span>Guardianes de la Galaxia: Star-Lord, Drax, Mantis, Groot y Gamora (2014).</span>
<span id="cb16-62"><a href="#cb16-62"></a></span>
<span id="cb16-63"><a href="#cb16-63"></a><span class="ss">- </span>Refuerzos clave: Capitana Marvel, Valkyrie, Korg, Miek y Rescue (Pepper Potts).</span>
<span id="cb16-64"><a href="#cb16-64"></a></span>
<span id="cb16-65"><a href="#cb16-65"></a><span class="ss">- </span>Ejércitos aliados: Las Dora Milaje de Wakanda, los Hechiceros de las Artes Místicas, el ejército de Asgard y los Saqueadores.</span>
<span id="cb16-66"><a href="#cb16-66"></a></span>
<span id="cb16-67"><a href="#cb16-67"></a><span class="ss">- </span>Especial mención a Black Widow.</span>
<span id="cb16-68"><a href="#cb16-68"></a></span>
<span id="cb16-69"><a href="#cb16-69"></a><span class="fu">## Introducción</span></span>
<span id="cb16-70"><a href="#cb16-70"></a></span>
<span id="cb16-71"><a href="#cb16-71"></a>Vamos a utilizar datos extraídos de Kaggle, los cuales podemos encontrar <span class="co">[</span><span class="ot">aquí</span><span class="co">](https://www.kaggle.com/datasets/jainaru/marvel-movies-box-office-data?resource=download)</span>,  <span class="co">[</span><span class="ot">aquí</span><span class="co">](https://www.kaggle.com/datasets/sahirmaharajj/the-avengers-dataset/data)</span>, </span>
<span id="cb16-72"><a href="#cb16-72"></a><span class="co">[</span><span class="ot">aquí</span><span class="co">](https://www.kaggle.com/datasets/dalepeh/mcu-movies-dataset)</span> y</span>
<span id="cb16-73"><a href="#cb16-73"></a><span class="co">[</span><span class="ot">aquí</span><span class="co">](https://www.kaggle.com/datasets/jonbown/marvel-screen-time)</span>,</span>
<span id="cb16-74"><a href="#cb16-74"></a></span>
<span id="cb16-75"><a href="#cb16-75"></a></span>
<span id="cb16-76"><a href="#cb16-76"></a>A continuación, explicaremos un poco nuestra elección de datos:</span>
<span id="cb16-77"><a href="#cb16-77"></a></span>
<span id="cb16-78"><a href="#cb16-78"></a>Por un lado, encontramos dfs en los que solo tenemos las películas del MCU y sus distintas variables con las que realizaremos el trabajo como son: las fases, la recaudación, las valoraciones, los años de estreno, los directores ... Además, tenemos un df con la duración en minutos de las películas.</span>
<span id="cb16-79"><a href="#cb16-79"></a></span>
<span id="cb16-80"><a href="#cb16-80"></a>Por otro lado, hemos cargado dfs con los personajes tanto del MCU como de los cómics para poder trabajar con el global y solo con los Vengadores.</span>
<span id="cb16-81"><a href="#cb16-81"></a></span>
<span id="cb16-82"><a href="#cb16-82"></a>Los datos se pueden cargar en la memoria de de R/RStudio de esta forma:</span>
<span id="cb16-83"><a href="#cb16-83"></a></span>
<span id="cb16-86"><a href="#cb16-86"></a><span class="in">```{r}</span></span>
<span id="cb16-87"><a href="#cb16-87"></a><span class="co">#Importación de películas</span></span>
<span id="cb16-88"><a href="#cb16-88"></a></span>
<span id="cb16-89"><a href="#cb16-89"></a>my_ruta <span class="ot">&lt;-</span> <span class="st">"./data/marvel_movies.csv"</span></span>
<span id="cb16-90"><a href="#cb16-90"></a></span>
<span id="cb16-91"><a href="#cb16-91"></a>df_movies <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(my_ruta)</span>
<span id="cb16-92"><a href="#cb16-92"></a></span>
<span id="cb16-93"><a href="#cb16-93"></a><span class="fu">names</span> (df_movies)</span>
<span id="cb16-94"><a href="#cb16-94"></a></span>
<span id="cb16-95"><a href="#cb16-95"></a>my_ruta_fases <span class="ot">&lt;-</span> <span class="st">"./data/box_office.csv"</span></span>
<span id="cb16-96"><a href="#cb16-96"></a></span>
<span id="cb16-97"><a href="#cb16-97"></a>df_fases <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(my_ruta_fases)</span>
<span id="cb16-98"><a href="#cb16-98"></a></span>
<span id="cb16-99"><a href="#cb16-99"></a>my_ruta_duracion <span class="ot">&lt;-</span> <span class="st">"./data/movie_times.csv"</span></span>
<span id="cb16-100"><a href="#cb16-100"></a></span>
<span id="cb16-101"><a href="#cb16-101"></a>df_duracion <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(my_ruta_duracion)</span>
<span id="cb16-102"><a href="#cb16-102"></a></span>
<span id="cb16-103"><a href="#cb16-103"></a><span class="co">#- A continuación, para obtener los datos sobre los personajes podemos hacerlo de dos formas:</span></span>
<span id="cb16-104"><a href="#cb16-104"></a></span>
<span id="cb16-105"><a href="#cb16-105"></a>my_ruta_personajes <span class="ot">&lt;-</span> <span class="st">"./data/avengers.csv"</span> <span class="co">#- En este caso, creamos ruta relativa e importamos</span></span>
<span id="cb16-106"><a href="#cb16-106"></a></span>
<span id="cb16-107"><a href="#cb16-107"></a>df_personajes <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(my_ruta_personajes)</span>
<span id="cb16-108"><a href="#cb16-108"></a></span>
<span id="cb16-109"><a href="#cb16-109"></a><span class="co">#install.packages("fivethirtyeight") ---- En este otro, instalamos el paquete que contiene a los personajes </span></span>
<span id="cb16-110"><a href="#cb16-110"></a><span class="co">#library(fivethirtyeight)</span></span>
<span id="cb16-111"><a href="#cb16-111"></a><span class="co">#df_personajes &lt;- avengers ---- asociamos el nombre que queremos.install.packages("fivethirtyeight")</span></span>
<span id="cb16-112"><a href="#cb16-112"></a></span>
<span id="cb16-113"><a href="#cb16-113"></a>my_ruta_fases <span class="ot">&lt;-</span> <span class="st">"./data/box_office.csv"</span></span>
<span id="cb16-114"><a href="#cb16-114"></a></span>
<span id="cb16-115"><a href="#cb16-115"></a>df_fases <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(my_ruta_fases)</span>
<span id="cb16-116"><a href="#cb16-116"></a></span>
<span id="cb16-117"><a href="#cb16-117"></a>my_ruta_total_personajes <span class="ot">&lt;-</span> <span class="st">"./data/marvel_wikia_data.csv"</span></span>
<span id="cb16-118"><a href="#cb16-118"></a></span>
<span id="cb16-119"><a href="#cb16-119"></a>df_total_personajes <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(my_ruta_total_personajes)</span>
<span id="cb16-120"><a href="#cb16-120"></a></span>
<span id="cb16-121"><a href="#cb16-121"></a><span class="in">```</span></span>
<span id="cb16-122"><a href="#cb16-122"></a></span>
<span id="cb16-123"><a href="#cb16-123"></a>El primer dataset contiene observaciones sobre un conjunto de <span class="in">`r nrow(df_movies)`</span> películas de Marvel. Hay <span class="in">`r ncol(df_movies)`</span> variables. El segundo dataset contiente observaciones sobre un conjunto <span class="in">`r nrow(df_personajes)`</span> personajes de cómics. Hay <span class="in">`r ncol(df_personajes)`</span> variables. </span>
<span id="cb16-124"><a href="#cb16-124"></a></span>
<span id="cb16-125"><a href="#cb16-125"></a>Cabe destacar que los datasets escogidos solo llegan hasta 2023 por lo que el análisis no incluirá los cambios que han habido de vengadores o algunas de las nuevas incorporaciones más recientes ni tendrá todas las películas de la fase 5 ni 6 (actual).</span>
<span id="cb16-126"><a href="#cb16-126"></a></span>
<span id="cb16-127"><a href="#cb16-127"></a>---</span>
<span id="cb16-128"><a href="#cb16-128"></a></span>
<span id="cb16-129"><a href="#cb16-129"></a><span class="fu">## Marvel Studios</span></span>
<span id="cb16-130"><a href="#cb16-130"></a></span>
<span id="cb16-131"><a href="#cb16-131"></a>A continuación, podemos observar una imagen en la que se encuentran muchos de los principales personajes del Universo Cinematográfico de Marvel.</span>
<span id="cb16-132"><a href="#cb16-132"></a></span>
<span id="cb16-135"><a href="#cb16-135"></a><span class="in">```{r}</span></span>
<span id="cb16-136"><a href="#cb16-136"></a><span class="co">#| echo: false</span></span>
<span id="cb16-137"><a href="#cb16-137"></a>my_url <span class="ot">&lt;-</span> <span class="st">"https://images.alphacoders.com/100/1003204.jpg"</span></span>
<span id="cb16-138"><a href="#cb16-138"></a><span class="in">```</span></span>
<span id="cb16-139"><a href="#cb16-139"></a></span>
<span id="cb16-140"><a href="#cb16-140"></a><span class="al">![Marvel](https://images.alphacoders.com/100/1003204.jpg)</span></span>
<span id="cb16-141"><a href="#cb16-141"></a></span>
<span id="cb16-144"><a href="#cb16-144"></a><span class="in">```{r}</span></span>
<span id="cb16-145"><a href="#cb16-145"></a><span class="co">#| echo: false</span></span>
<span id="cb16-146"><a href="#cb16-146"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb16-147"><a href="#cb16-147"></a><span class="fu">library</span>(ggimage)</span>
<span id="cb16-148"><a href="#cb16-148"></a><span class="fu">library</span>(magick)</span>
<span id="cb16-149"><a href="#cb16-149"></a><span class="co">#| label: animacion-heroes</span></span>
<span id="cb16-150"><a href="#cb16-150"></a><span class="co">#| message: false</span></span>
<span id="cb16-151"><a href="#cb16-151"></a><span class="co">#| warning: false</span></span>
<span id="cb16-152"><a href="#cb16-152"></a></span>
<span id="cb16-153"><a href="#cb16-153"></a>iron_man <span class="ot">&lt;-</span> <span class="fu">image_read</span>(<span class="st">"./imagenes/iron_man.jpg"</span>) <span class="sc">%&gt;%</span> <span class="fu">image_scale</span>(<span class="st">"700"</span>)</span>
<span id="cb16-154"><a href="#cb16-154"></a>thor <span class="ot">&lt;-</span> <span class="fu">image_read</span>(<span class="st">"./imagenes/thor.webp"</span>) <span class="sc">%&gt;%</span> <span class="fu">image_scale</span>(<span class="st">"700"</span>)</span>
<span id="cb16-155"><a href="#cb16-155"></a>black_panther <span class="ot">&lt;-</span> <span class="fu">image_read</span>(<span class="st">"./imagenes/black_panther.jpg"</span>) <span class="sc">%&gt;%</span> <span class="fu">image_scale</span>(<span class="st">"700"</span>)</span>
<span id="cb16-156"><a href="#cb16-156"></a>hawkeye <span class="ot">&lt;-</span> <span class="fu">image_read</span>(<span class="st">"./imagenes/hawkeye.jpg"</span>) <span class="sc">%&gt;%</span> <span class="fu">image_scale</span>(<span class="st">"700"</span>)</span>
<span id="cb16-157"><a href="#cb16-157"></a>black_widow <span class="ot">&lt;-</span> <span class="fu">image_read</span>(<span class="st">"./imagenes/black_widow.jpg"</span>) <span class="sc">%&gt;%</span> <span class="fu">image_scale</span>(<span class="st">"700"</span>)</span>
<span id="cb16-158"><a href="#cb16-158"></a>spiderman <span class="ot">&lt;-</span> <span class="fu">image_read</span>(<span class="st">"./imagenes/spiderman.jpg"</span>) <span class="sc">%&gt;%</span> <span class="fu">image_scale</span>(<span class="st">"700"</span>)</span>
<span id="cb16-159"><a href="#cb16-159"></a>captain_america <span class="ot">&lt;-</span> <span class="fu">image_read</span>(<span class="st">"./imagenes/capi.jpg"</span>) <span class="sc">%&gt;%</span> <span class="fu">image_scale</span>(<span class="st">"700"</span>)</span>
<span id="cb16-160"><a href="#cb16-160"></a>hulk <span class="ot">&lt;-</span> <span class="fu">image_read</span>(<span class="st">"./imagenes/hulk.jpg"</span>) <span class="sc">%&gt;%</span> <span class="fu">image_scale</span>(<span class="st">"700"</span>)</span>
<span id="cb16-161"><a href="#cb16-161"></a>dr_strange <span class="ot">&lt;-</span> <span class="fu">image_read</span>(<span class="st">"./imagenes/dr_strange.jpg"</span>) <span class="sc">%&gt;%</span> <span class="fu">image_scale</span>(<span class="st">"700"</span>)</span>
<span id="cb16-162"><a href="#cb16-162"></a>guardianes <span class="ot">&lt;-</span> <span class="fu">image_read</span>(<span class="st">"./imagenes/guardianes.webp"</span>) <span class="sc">%&gt;%</span> <span class="fu">image_scale</span>(<span class="st">"700"</span>)</span>
<span id="cb16-163"><a href="#cb16-163"></a></span>
<span id="cb16-164"><a href="#cb16-164"></a>heroes <span class="ot">&lt;-</span> <span class="fu">c</span>(iron_man, thor, black_panther, hawkeye, black_widow, spiderman, captain_america, hulk, dr_strange, guardianes)</span>
<span id="cb16-165"><a href="#cb16-165"></a></span>
<span id="cb16-166"><a href="#cb16-166"></a>animacion <span class="ot">&lt;-</span> <span class="fu">image_animate</span>(heroes, <span class="at">fps =</span> <span class="fl">0.5</span>)</span>
<span id="cb16-167"><a href="#cb16-167"></a>animacion</span>
<span id="cb16-168"><a href="#cb16-168"></a><span class="in">```</span></span>
<span id="cb16-169"><a href="#cb16-169"></a></span>
<span id="cb16-170"><a href="#cb16-170"></a>------------------------------------------------------------------------</span>
<span id="cb16-171"><a href="#cb16-171"></a></span>
<span id="cb16-172"><a href="#cb16-172"></a>Como bien sabemos el MCU es mucho más extenso ya que en los cómics hay muchos más personajes de los que han llegado a salir en la saga de *Avengers*; por ello, en el margen vamos a poner una foto con muchos más héroes y heroínas:</span>
<span id="cb16-173"><a href="#cb16-173"></a></span>
<span id="cb16-174"><a href="#cb16-174"></a>::: column-margin</span>
<span id="cb16-175"><a href="#cb16-175"></a><span class="al">![](./imagenes/universo_marvel.jpg)</span>{fig-align="center"}</span>
<span id="cb16-176"><a href="#cb16-176"></a>:::</span>
<span id="cb16-177"><a href="#cb16-177"></a></span>
<span id="cb16-178"><a href="#cb16-178"></a>------------------------------------------------------------------------</span>
<span id="cb16-179"><a href="#cb16-179"></a></span>
<span id="cb16-180"><a href="#cb16-180"></a></span>
<span id="cb16-181"><a href="#cb16-181"></a></span>
<span id="cb16-182"><a href="#cb16-182"></a><span class="fu">## Algunos gráficos</span></span>
<span id="cb16-183"><a href="#cb16-183"></a></span>
<span id="cb16-184"><a href="#cb16-184"></a>Bueno pues vamos a hacer algún gráfico, pero claro antes he de cargar los paquetes.</span>
<span id="cb16-185"><a href="#cb16-185"></a></span>
<span id="cb16-188"><a href="#cb16-188"></a><span class="in">```{r}</span></span>
<span id="cb16-189"><a href="#cb16-189"></a><span class="co">#| eval: true</span></span>
<span id="cb16-190"><a href="#cb16-190"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb16-191"><a href="#cb16-191"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb16-192"><a href="#cb16-192"></a><span class="fu">library</span>(forcats)</span>
<span id="cb16-193"><a href="#cb16-193"></a><span class="fu">library</span>(gt)</span>
<span id="cb16-194"><a href="#cb16-194"></a><span class="fu">library</span>(plotly)</span>
<span id="cb16-195"><a href="#cb16-195"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb16-196"><a href="#cb16-196"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb16-197"><a href="#cb16-197"></a><span class="fu">library</span>(stringr)</span>
<span id="cb16-198"><a href="#cb16-198"></a><span class="fu">library</span> (treemap) <span class="co">#install.packages ("treemap")</span></span>
<span id="cb16-199"><a href="#cb16-199"></a><span class="fu">library</span>(ggimage)</span>
<span id="cb16-200"><a href="#cb16-200"></a></span>
<span id="cb16-201"><a href="#cb16-201"></a><span class="in">```</span></span>
<span id="cb16-202"><a href="#cb16-202"></a></span>
<span id="cb16-203"><a href="#cb16-203"></a>Por otro lado, vamos a establecer la paleta que pondremos en nuestros gráficos.</span>
<span id="cb16-204"><a href="#cb16-204"></a></span>
<span id="cb16-205"><a href="#cb16-205"></a><span class="in">```{r setup}</span></span>
<span id="cb16-206"><a href="#cb16-206"></a><span class="co">#Configuración de paleta</span></span>
<span id="cb16-207"><a href="#cb16-207"></a></span>
<span id="cb16-208"><a href="#cb16-208"></a><span class="fu">library</span>(paletteer)</span>
<span id="cb16-209"><a href="#cb16-209"></a></span>
<span id="cb16-210"><a href="#cb16-210"></a>paleta_discreta <span class="ot">&lt;-</span> <span class="fu">paletteer_c</span>( <span class="st">"ggthemes::Orange-Blue-White Diverging"</span>, <span class="dv">6</span>)</span>
<span id="cb16-211"><a href="#cb16-211"></a></span>
<span id="cb16-212"><a href="#cb16-212"></a>scale_fill_default <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb16-213"><a href="#cb16-213"></a>  <span class="fu">scale_fill_gradientn</span>(<span class="at">colors =</span> mi_paleta, ...)</span>
<span id="cb16-214"><a href="#cb16-214"></a>}</span>
<span id="cb16-215"><a href="#cb16-215"></a></span>
<span id="cb16-216"><a href="#cb16-216"></a>scale_color_default <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb16-217"><a href="#cb16-217"></a>  <span class="fu">scale_color_gradientn</span>(<span class="at">colors =</span> mi_paleta, ...)</span>
<span id="cb16-218"><a href="#cb16-218"></a>}</span>
<span id="cb16-219"><a href="#cb16-219"></a></span>
<span id="cb16-220"><a href="#cb16-220"></a></span>
<span id="cb16-221"><a href="#cb16-221"></a><span class="in">```</span></span>
<span id="cb16-222"><a href="#cb16-222"></a></span>
<span id="cb16-223"><a href="#cb16-223"></a></span>
<span id="cb16-224"><a href="#cb16-224"></a>Un paso previo también es arreglar los datos. Para ello, en primer lugar, vamos a quitar aquellas columnas que no necesitamos o añadir las que nos hagan falta.</span>
<span id="cb16-225"><a href="#cb16-225"></a></span>
<span id="cb16-228"><a href="#cb16-228"></a><span class="in">```{r}</span></span>
<span id="cb16-229"><a href="#cb16-229"></a><span class="co">#- En el df de películas no vamos a quitar ninguna columna; sin embargo, vamos a añadir una con el protagonista de cada película.</span></span>
<span id="cb16-230"><a href="#cb16-230"></a>df_movies <span class="ot">&lt;-</span> df_movies <span class="sc">%&gt;%</span></span>
<span id="cb16-231"><a href="#cb16-231"></a>  <span class="fu">mutate</span> (<span class="at">protagonista =</span> <span class="fu">case_when</span>(</span>
<span id="cb16-232"><a href="#cb16-232"></a>    <span class="fu">grepl</span>(<span class="st">"Iron"</span>, movie) <span class="sc">~</span> <span class="st">"Iron Man"</span>,</span>
<span id="cb16-233"><a href="#cb16-233"></a>    <span class="fu">grepl</span>(<span class="st">"America"</span>, movie) <span class="sc">~</span> <span class="st">"Captain America"</span>,</span>
<span id="cb16-234"><a href="#cb16-234"></a>    <span class="fu">grepl</span>(<span class="st">"Thor"</span>, movie) <span class="sc">~</span> <span class="st">"Thor"</span>,</span>
<span id="cb16-235"><a href="#cb16-235"></a>    <span class="fu">grepl</span>(<span class="st">"Incredible Hulk"</span>, movie) <span class="sc">~</span> <span class="st">"Hulk"</span>,</span>
<span id="cb16-236"><a href="#cb16-236"></a>    <span class="fu">grepl</span>(<span class="st">"Widow"</span>, movie) <span class="sc">~</span> <span class="st">"Black Widow"</span>,</span>
<span id="cb16-237"><a href="#cb16-237"></a>    <span class="fu">grepl</span>(<span class="st">"Ant-Man"</span>, movie) <span class="sc">~</span> <span class="st">"Ant-Man"</span>,</span>
<span id="cb16-238"><a href="#cb16-238"></a>    <span class="fu">grepl</span>(<span class="st">"Spider-Man"</span>, movie) <span class="sc">~</span> <span class="st">"Spider-Man"</span>,</span>
<span id="cb16-239"><a href="#cb16-239"></a>    <span class="fu">grepl</span>(<span class="st">"Shang-Chi"</span>, movie) <span class="sc">~</span> <span class="st">"Shang-Chi"</span>,</span>
<span id="cb16-240"><a href="#cb16-240"></a>    <span class="fu">grepl</span>(<span class="st">"Deadpool"</span>, movie) <span class="sc">~</span> <span class="st">"Deadpool"</span>,</span>
<span id="cb16-241"><a href="#cb16-241"></a>    <span class="fu">grepl</span>(<span class="st">"Panther"</span>, movie) <span class="sc">~</span> <span class="st">"Black Panther"</span>,</span>
<span id="cb16-242"><a href="#cb16-242"></a>    <span class="fu">grepl</span>(<span class="st">"Strange"</span>, movie) <span class="sc">~</span> <span class="st">"Dr Strange"</span>,</span>
<span id="cb16-243"><a href="#cb16-243"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb16-244"><a href="#cb16-244"></a>  <span class="fu">relocate</span> (protagonista, <span class="at">.after =</span> category)</span>
<span id="cb16-245"><a href="#cb16-245"></a></span>
<span id="cb16-246"><a href="#cb16-246"></a><span class="co">#- En este caso, vamos a juntar el df de duración con el dde fases; para ello, primeramente tenemos que cambiar algunos nombres de películas porque la forma en la que están escritos es diferente en cada df y no podemos juntarlos bien.</span></span>
<span id="cb16-247"><a href="#cb16-247"></a>df_duracion <span class="ot">&lt;-</span> df_duracion <span class="sc">%&gt;%</span></span>
<span id="cb16-248"><a href="#cb16-248"></a>  <span class="fu">mutate</span>(<span class="at">movie =</span> <span class="fu">case_when</span>(</span>
<span id="cb16-249"><a href="#cb16-249"></a>    movie <span class="sc">==</span> <span class="st">"Spider-Man: Far from Home"</span> <span class="sc">~</span> <span class="st">"Spider-Man: Far From Home"</span>,</span>
<span id="cb16-250"><a href="#cb16-250"></a>    movie <span class="sc">==</span> <span class="st">"Shang-Chi"</span> <span class="sc">~</span> <span class="st">"Shang-Chi and the Legend of the Ten Rings"</span>,</span>
<span id="cb16-251"><a href="#cb16-251"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> movie))</span>
<span id="cb16-252"><a href="#cb16-252"></a>  </span>
<span id="cb16-253"><a href="#cb16-253"></a>df_fases <span class="ot">&lt;-</span> df_fases <span class="sc">%&gt;%</span></span>
<span id="cb16-254"><a href="#cb16-254"></a>  <span class="fu">select</span> (Phase, Film, Year_Release, Director, movie_image) <span class="sc">%&gt;%</span></span>
<span id="cb16-255"><a href="#cb16-255"></a>  <span class="fu">left_join</span> (df_duracion, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Film"</span> <span class="ot">=</span> <span class="st">"movie"</span>))  <span class="co">#- Tener en cuenta que en df_duración solo hasta 2021, aparecerán 5 NAs.</span></span>
<span id="cb16-256"><a href="#cb16-256"></a></span>
<span id="cb16-257"><a href="#cb16-257"></a><span class="co">#- Por otra parte, en el df de personajes vamos a hacer algunas modificaciones. Comenzaremos quitando estas dos columnas que no nos hacen falta:</span></span>
<span id="cb16-258"><a href="#cb16-258"></a>df_personajes <span class="ot">&lt;-</span> df_personajes <span class="sc">%&gt;%</span></span>
<span id="cb16-259"><a href="#cb16-259"></a>  <span class="fu">select</span> (<span class="sc">-</span> V22, <span class="sc">-</span> Notes)</span>
<span id="cb16-260"><a href="#cb16-260"></a></span>
<span id="cb16-261"><a href="#cb16-261"></a><span class="co">#- A continuación, añadimos una nueva columna llamada "Alias" en las que pondremos los nombres de superhéroe de cada personaje y la recolocaremos al lado de los Nombres/Alias originales:</span></span>
<span id="cb16-262"><a href="#cb16-262"></a></span>
<span id="cb16-263"><a href="#cb16-263"></a>df_personajes <span class="ot">&lt;-</span> df_personajes <span class="sc">%&gt;%</span></span>
<span id="cb16-264"><a href="#cb16-264"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span> <span class="sc">!=</span> <span class="st">"Tony Masters"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-265"><a href="#cb16-265"></a>  <span class="fu">mutate</span>(<span class="at">Alias =</span> <span class="fu">case_when</span>(</span>
<span id="cb16-266"><a href="#cb16-266"></a>    <span class="fu">grepl</span>(<span class="st">"Tony"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Iron Man"</span>,</span>
<span id="cb16-267"><a href="#cb16-267"></a>    <span class="fu">grepl</span>(<span class="st">"Clinton Francis Barton"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Hawkeye"</span>,</span>
<span id="cb16-268"><a href="#cb16-268"></a>    <span class="fu">grepl</span>(<span class="st">"Rogers"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Captain America"</span>,</span>
<span id="cb16-269"><a href="#cb16-269"></a>    <span class="fu">grepl</span>(<span class="st">"Thor"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Thor"</span>,</span>
<span id="cb16-270"><a href="#cb16-270"></a>    <span class="fu">grepl</span>(<span class="st">"Banner"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Hulk"</span>,</span>
<span id="cb16-271"><a href="#cb16-271"></a>    <span class="fu">grepl</span>(<span class="st">"Romanova"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Black Widow"</span>,</span>
<span id="cb16-272"><a href="#cb16-272"></a>    <span class="fu">grepl</span>(<span class="st">"Scott Edward Harris Lang"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Ant-Man"</span>,</span>
<span id="cb16-273"><a href="#cb16-273"></a>    <span class="fu">grepl</span>(<span class="st">"Wanda Maximoff"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Scarlet Witch"</span>,</span>
<span id="cb16-274"><a href="#cb16-274"></a>    <span class="fu">grepl</span>(<span class="st">"Peter Benjamin Parker"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Spider-Man"</span>,</span>
<span id="cb16-275"><a href="#cb16-275"></a>    <span class="fu">grepl</span>(<span class="st">"Shang-Chi"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Shang-Chi"</span>,</span>
<span id="cb16-276"><a href="#cb16-276"></a>    <span class="fu">grepl</span>(<span class="st">"T'Challa"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Black Panther"</span>,</span>
<span id="cb16-277"><a href="#cb16-277"></a>    <span class="fu">grepl</span>(<span class="st">"Buchanan"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Bucky"</span>,</span>
<span id="cb16-278"><a href="#cb16-278"></a>    <span class="fu">grepl</span>(<span class="st">"Victor Shade "</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Vision"</span>,</span>
<span id="cb16-279"><a href="#cb16-279"></a>    <span class="fu">grepl</span>(<span class="st">"Doctor Stephen Vincent Strange"</span>, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>) <span class="sc">~</span> <span class="st">"Dr Strange"</span>,</span>
<span id="cb16-280"><a href="#cb16-280"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Other"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-281"><a href="#cb16-281"></a>  <span class="fu">relocate</span>(Alias, <span class="at">.after =</span> <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>)</span>
<span id="cb16-282"><a href="#cb16-282"></a></span>
<span id="cb16-283"><a href="#cb16-283"></a><span class="co">#- También vamos a crear un nuevo df con los Vengadores para poder juntarlos con el df_movies</span></span>
<span id="cb16-284"><a href="#cb16-284"></a></span>
<span id="cb16-285"><a href="#cb16-285"></a>avengers <span class="ot">&lt;-</span> df_personajes <span class="sc">%&gt;%</span></span>
<span id="cb16-286"><a href="#cb16-286"></a>  <span class="fu">filter</span> (Alias <span class="sc">!=</span> <span class="st">"Other"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-287"><a href="#cb16-287"></a>  <span class="fu">select</span> (URL, <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>, Alias, Appearances, Gender)</span>
<span id="cb16-288"><a href="#cb16-288"></a></span>
<span id="cb16-289"><a href="#cb16-289"></a><span class="co">#- Finalmente, juntaremos el df de avengers con el de películas para tener observar las películas individuales que tienen algunos personajes:</span></span>
<span id="cb16-290"><a href="#cb16-290"></a></span>
<span id="cb16-291"><a href="#cb16-291"></a>pelicula_propia <span class="ot">&lt;-</span> avengers <span class="sc">%&gt;%</span></span>
<span id="cb16-292"><a href="#cb16-292"></a>  <span class="fu">left_join</span>(df_movies, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Alias"</span> <span class="ot">=</span> <span class="st">"protagonista"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-293"><a href="#cb16-293"></a>  <span class="fu">select</span> (<span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>,movie, Gender, Appearances, Alias, year)</span>
<span id="cb16-294"><a href="#cb16-294"></a></span>
<span id="cb16-295"><a href="#cb16-295"></a><span class="co">#- Finalmente, los df que usaremos son los siguientes:</span></span>
<span id="cb16-296"><a href="#cb16-296"></a><span class="co">#- df_fases</span></span>
<span id="cb16-297"><a href="#cb16-297"></a><span class="co">#- pelicula_propia</span></span>
<span id="cb16-298"><a href="#cb16-298"></a><span class="co">#- df_movies</span></span>
<span id="cb16-299"><a href="#cb16-299"></a><span class="co">#- df_total_personajes</span></span>
<span id="cb16-300"><a href="#cb16-300"></a></span>
<span id="cb16-301"><a href="#cb16-301"></a><span class="in">```</span></span>
<span id="cb16-302"><a href="#cb16-302"></a></span>
<span id="cb16-303"><a href="#cb16-303"></a>------------------------------------------------------------------------</span>
<span id="cb16-304"><a href="#cb16-304"></a></span>
<span id="cb16-305"><a href="#cb16-305"></a><span class="fu">### Primeros gráficos. Comparativa numérica</span></span>
<span id="cb16-306"><a href="#cb16-306"></a></span>
<span id="cb16-307"><a href="#cb16-307"></a>En este apartado, realizamos una comparación entre el número de héroes y heroínas y la cantidad de películas que están asociadas a cada uno.</span>
<span id="cb16-308"><a href="#cb16-308"></a></span>
<span id="cb16-309"><a href="#cb16-309"></a>En este primer gráfico, vamos a contrastar el número de personajes que hay en el MCU según su género para mostrar en una gráfica que el número de hombres es mayor al de mujeres, debido a que en un comienzo la mayoría de personajes que se escribían eran hombres.</span>
<span id="cb16-310"><a href="#cb16-310"></a></span>
<span id="cb16-313"><a href="#cb16-313"></a><span class="in">```{r}</span></span>
<span id="cb16-314"><a href="#cb16-314"></a><span class="co">#- primer gráfico</span></span>
<span id="cb16-315"><a href="#cb16-315"></a></span>
<span id="cb16-316"><a href="#cb16-316"></a>sexo <span class="ot">&lt;-</span> df_total_personajes <span class="sc">%&gt;%</span> </span>
<span id="cb16-317"><a href="#cb16-317"></a>  <span class="fu">filter</span>(SEX <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Male Characters"</span>, <span class="st">"Female Characters"</span>))</span>
<span id="cb16-318"><a href="#cb16-318"></a></span>
<span id="cb16-319"><a href="#cb16-319"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> sexo,</span>
<span id="cb16-320"><a href="#cb16-320"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> SEX, <span class="at">fill =</span> SEX)) <span class="sc">+</span></span>
<span id="cb16-321"><a href="#cb16-321"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb16-322"><a href="#cb16-322"></a>  <span class="fu">labs</span>(</span>
<span id="cb16-323"><a href="#cb16-323"></a>    <span class="at">title =</span> <span class="st">"Comparativa de sexo entre superhéroes"</span>,</span>
<span id="cb16-324"><a href="#cb16-324"></a>    <span class="at">x =</span> <span class="st">"Sexo"</span>,</span>
<span id="cb16-325"><a href="#cb16-325"></a>    <span class="at">y =</span> <span class="st">"Número de superhéroes"</span>) <span class="sc">+</span></span>
<span id="cb16-326"><a href="#cb16-326"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">"mono"</span>) <span class="sc">+</span></span>
<span id="cb16-327"><a href="#cb16-327"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb16-328"><a href="#cb16-328"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">15</span>,</span>
<span id="cb16-329"><a href="#cb16-329"></a>                                   <span class="at">vjust=</span><span class="dv">2</span>,</span>
<span id="cb16-330"><a href="#cb16-330"></a>                                   <span class="at">face=</span><span class="st">"bold"</span>)) <span class="sc">+</span>  </span>
<span id="cb16-331"><a href="#cb16-331"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> paleta_discreta)</span>
<span id="cb16-332"><a href="#cb16-332"></a></span>
<span id="cb16-333"><a href="#cb16-333"></a>p</span>
<span id="cb16-334"><a href="#cb16-334"></a></span>
<span id="cb16-335"><a href="#cb16-335"></a></span>
<span id="cb16-336"><a href="#cb16-336"></a><span class="in">```</span></span>
<span id="cb16-337"><a href="#cb16-337"></a></span>
<span id="cb16-338"><a href="#cb16-338"></a>Tras esta imagen, vamos a comparar el porcentaje de películas individuales que tienen los hombres vs las mujeres dentro del equipo de Vengadores en un piechart. Como podemos comprobar, al haber más héroes, tanto en el equipo de Avengers como en general, el porcentaje de películas que van a estar protagonizadas por ellos es mucho mayor.</span>
<span id="cb16-339"><a href="#cb16-339"></a></span>
<span id="cb16-342"><a href="#cb16-342"></a><span class="in">```{r}</span></span>
<span id="cb16-343"><a href="#cb16-343"></a>porcentaje <span class="ot">&lt;-</span> pelicula_propia <span class="sc">%&gt;%</span></span>
<span id="cb16-344"><a href="#cb16-344"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(movie)) <span class="sc">%&gt;%</span></span>
<span id="cb16-345"><a href="#cb16-345"></a>  <span class="fu">count</span>(Gender) <span class="sc">%&gt;%</span></span>
<span id="cb16-346"><a href="#cb16-346"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-347"><a href="#cb16-347"></a>    <span class="at">porcentaje =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n),</span>
<span id="cb16-348"><a href="#cb16-348"></a>    <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">percent</span>(porcentaje, <span class="at">accuracy =</span> <span class="dv">1</span>))</span>
<span id="cb16-349"><a href="#cb16-349"></a></span>
<span id="cb16-350"><a href="#cb16-350"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>( porcentaje,</span>
<span id="cb16-351"><a href="#cb16-351"></a>  <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> n, <span class="at">fill =</span> Gender)) <span class="sc">+</span></span>
<span id="cb16-352"><a href="#cb16-352"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb16-353"><a href="#cb16-353"></a>  <span class="fu">coord_polar</span>(<span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb16-354"><a href="#cb16-354"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb16-355"><a href="#cb16-355"></a>    <span class="fu">aes</span>(<span class="at">label =</span> label),</span>
<span id="cb16-356"><a href="#cb16-356"></a>    <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb16-357"><a href="#cb16-357"></a>    <span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb16-358"><a href="#cb16-358"></a>    <span class="at">size =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb16-359"><a href="#cb16-359"></a>  <span class="fu">theme_void</span>(<span class="at">base_family =</span> <span class="st">"mono"</span>)<span class="sc">+</span></span>
<span id="cb16-360"><a href="#cb16-360"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">15</span>,</span>
<span id="cb16-361"><a href="#cb16-361"></a>                                   <span class="at">vjust=</span><span class="dv">2</span>,</span>
<span id="cb16-362"><a href="#cb16-362"></a>                                   <span class="at">face=</span><span class="st">"bold"</span>)) <span class="sc">+</span> </span>
<span id="cb16-363"><a href="#cb16-363"></a>  <span class="fu">labs</span>(</span>
<span id="cb16-364"><a href="#cb16-364"></a>    <span class="at">title =</span> <span class="st">"Porcentaje de películas por género"</span>,</span>
<span id="cb16-365"><a href="#cb16-365"></a>    <span class="at">subtitle =</span> <span class="st">"(protagonistas vengadores)"</span>) <span class="sc">+</span></span>
<span id="cb16-366"><a href="#cb16-366"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> paleta_discreta)</span>
<span id="cb16-367"><a href="#cb16-367"></a></span>
<span id="cb16-368"><a href="#cb16-368"></a>p</span>
<span id="cb16-369"><a href="#cb16-369"></a></span>
<span id="cb16-370"><a href="#cb16-370"></a><span class="in">```</span></span>
<span id="cb16-371"><a href="#cb16-371"></a></span>
<span id="cb16-372"><a href="#cb16-372"></a>Por último, en la siguiente gráfica se muestra el número de películas que tiene cada uno de los Vengadores. Cabe destacar el caso de Spider-Man el cual realmente tendría más películas; sin embargo, en este análisis solo usamos las más recientes que son las 3 protagonizadas por el actor Tom Holland y la de animación con Miles Morales.</span>
<span id="cb16-373"><a href="#cb16-373"></a></span>
<span id="cb16-376"><a href="#cb16-376"></a><span class="in">```{r}</span></span>
<span id="cb16-377"><a href="#cb16-377"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(pelicula_propia <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(movie)), <span class="fu">aes</span>(<span class="at">x =</span> Alias)) <span class="sc">+</span></span>
<span id="cb16-378"><a href="#cb16-378"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"#ff721a"</span>) <span class="sc">+</span></span>
<span id="cb16-379"><a href="#cb16-379"></a>  <span class="fu">labs</span>(</span>
<span id="cb16-380"><a href="#cb16-380"></a>    <span class="at">title =</span> <span class="st">"Número de películas por personaje"</span>,</span>
<span id="cb16-381"><a href="#cb16-381"></a>    <span class="at">x =</span> <span class="st">"Personajes"</span>,</span>
<span id="cb16-382"><a href="#cb16-382"></a>    <span class="at">y =</span> <span class="st">"Número de películas"</span>) <span class="sc">+</span></span>
<span id="cb16-383"><a href="#cb16-383"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb16-384"><a href="#cb16-384"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(forcats<span class="sc">::</span><span class="fu">fct_rev</span>(forcats<span class="sc">::</span><span class="fu">fct_infreq</span>(Alias))),</span>
<span id="cb16-385"><a href="#cb16-385"></a>         <span class="at">fill =</span> <span class="st">"#ff721a"</span>) <span class="sc">+</span></span>
<span id="cb16-386"><a href="#cb16-386"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">"mono"</span>)<span class="sc">+</span></span>
<span id="cb16-387"><a href="#cb16-387"></a>  <span class="fu">theme</span> (<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">15</span>,</span>
<span id="cb16-388"><a href="#cb16-388"></a>                                   <span class="at">vjust=</span><span class="dv">2</span>,</span>
<span id="cb16-389"><a href="#cb16-389"></a>                                   <span class="at">face=</span><span class="st">"bold"</span>))</span>
<span id="cb16-390"><a href="#cb16-390"></a></span>
<span id="cb16-391"><a href="#cb16-391"></a>p</span>
<span id="cb16-392"><a href="#cb16-392"></a></span>
<span id="cb16-393"><a href="#cb16-393"></a></span>
<span id="cb16-394"><a href="#cb16-394"></a><span class="in">```</span></span>
<span id="cb16-395"><a href="#cb16-395"></a></span>
<span id="cb16-396"><a href="#cb16-396"></a>------------------------------------------------------------------------</span>
<span id="cb16-397"><a href="#cb16-397"></a></span>
<span id="cb16-398"><a href="#cb16-398"></a><span class="fu">### Segundo gráfico. Marvel y la taquilla</span></span>
<span id="cb16-399"><a href="#cb16-399"></a></span>
<span id="cb16-400"><a href="#cb16-400"></a>A continuación, vamos a construir un gráfico circular para ver qué películas han tenido una mayor recaudación.</span>
<span id="cb16-401"><a href="#cb16-401"></a></span>
<span id="cb16-404"><a href="#cb16-404"></a><span class="in">```{r}</span></span>
<span id="cb16-405"><a href="#cb16-405"></a><span class="co">#- segundo gráfico</span></span>
<span id="cb16-406"><a href="#cb16-406"></a></span>
<span id="cb16-407"><a href="#cb16-407"></a>recaudacion <span class="ot">&lt;-</span> df_movies <span class="sc">%&gt;%</span></span>
<span id="cb16-408"><a href="#cb16-408"></a>  <span class="fu">select</span>(movie, <span class="st">`</span><span class="at">worldwide gross ($m)</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-409"><a href="#cb16-409"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">worldwide gross ($m)</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-410"><a href="#cb16-410"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-411"><a href="#cb16-411"></a>    <span class="at">id =</span> <span class="fu">row_number</span>(),</span>
<span id="cb16-412"><a href="#cb16-412"></a>    <span class="at">value =</span> <span class="st">`</span><span class="at">worldwide gross ($m)</span><span class="st">`</span>,</span>
<span id="cb16-413"><a href="#cb16-413"></a>    <span class="at">individual =</span> movie)</span>
<span id="cb16-414"><a href="#cb16-414"></a></span>
<span id="cb16-415"><a href="#cb16-415"></a>number_of_bar <span class="ot">&lt;-</span> <span class="fu">nrow</span>(recaudacion)</span>
<span id="cb16-416"><a href="#cb16-416"></a></span>
<span id="cb16-417"><a href="#cb16-417"></a>angle <span class="ot">&lt;-</span> <span class="dv">90</span> <span class="sc">-</span> <span class="dv">360</span> <span class="sc">*</span> (recaudacion<span class="sc">$</span>id <span class="sc">-</span> <span class="fl">0.5</span>) <span class="sc">/</span> number_of_bar</span>
<span id="cb16-418"><a href="#cb16-418"></a></span>
<span id="cb16-419"><a href="#cb16-419"></a>recaudacion<span class="sc">$</span>hjust <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(angle <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">90</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb16-420"><a href="#cb16-420"></a>recaudacion<span class="sc">$</span>angle <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(angle <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">90</span>, angle <span class="sc">+</span> <span class="dv">180</span>, angle)</span>
<span id="cb16-421"><a href="#cb16-421"></a></span>
<span id="cb16-422"><a href="#cb16-422"></a></span>
<span id="cb16-423"><a href="#cb16-423"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(recaudacion, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.factor</span>(id), <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb16-424"><a href="#cb16-424"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="fu">alpha</span>(<span class="st">"#2B5C8A"</span>, <span class="fl">0.9</span>)) <span class="sc">+</span></span>
<span id="cb16-425"><a href="#cb16-425"></a>    <span class="fu">ylim</span>(<span class="sc">-</span><span class="fu">max</span>(recaudacion<span class="sc">$</span>value) <span class="sc">*</span> <span class="fl">0.25</span>, <span class="fu">max</span>(recaudacion<span class="sc">$</span>value) <span class="sc">*</span> <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb16-426"><a href="#cb16-426"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">"mono"</span>) <span class="sc">+</span></span>
<span id="cb16-427"><a href="#cb16-427"></a>    <span class="fu">theme</span>(</span>
<span id="cb16-428"><a href="#cb16-428"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-429"><a href="#cb16-429"></a>    <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-430"><a href="#cb16-430"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-431"><a href="#cb16-431"></a>    <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">4</span>), <span class="st">"cm"</span>)) <span class="sc">+</span></span>
<span id="cb16-432"><a href="#cb16-432"></a>   <span class="fu">coord_polar</span>(<span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb16-433"><a href="#cb16-433"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb16-434"><a href="#cb16-434"></a>    <span class="at">data =</span> recaudacion,</span>
<span id="cb16-435"><a href="#cb16-435"></a>    <span class="fu">aes</span>(</span>
<span id="cb16-436"><a href="#cb16-436"></a>      <span class="at">x =</span> id,</span>
<span id="cb16-437"><a href="#cb16-437"></a>      <span class="at">y =</span> value <span class="sc">+</span> <span class="fu">max</span>(recaudacion<span class="sc">$</span>value) <span class="sc">*</span> <span class="fl">0.05</span>,</span>
<span id="cb16-438"><a href="#cb16-438"></a>      <span class="at">label =</span> individual,</span>
<span id="cb16-439"><a href="#cb16-439"></a>      <span class="at">hjust =</span> hjust),</span>
<span id="cb16-440"><a href="#cb16-440"></a>    <span class="at">angle =</span> recaudacion<span class="sc">$</span>angle,</span>
<span id="cb16-441"><a href="#cb16-441"></a>    <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>,</span>
<span id="cb16-442"><a href="#cb16-442"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb16-443"><a href="#cb16-443"></a>    <span class="at">alpha =</span> <span class="fl">0.7</span>)</span>
<span id="cb16-444"><a href="#cb16-444"></a></span>
<span id="cb16-445"><a href="#cb16-445"></a>p</span>
<span id="cb16-446"><a href="#cb16-446"></a></span>
<span id="cb16-447"><a href="#cb16-447"></a></span>
<span id="cb16-448"><a href="#cb16-448"></a><span class="in">```</span></span>
<span id="cb16-449"><a href="#cb16-449"></a></span>
<span id="cb16-450"><a href="#cb16-450"></a>A este gráfico, para hacer una mayor aproximación,lo acompañaremos con una tabla que muestre el top 5 películas más recaudadas.</span>
<span id="cb16-451"><a href="#cb16-451"></a></span>
<span id="cb16-454"><a href="#cb16-454"></a><span class="in">```{r}</span></span>
<span id="cb16-455"><a href="#cb16-455"></a>top5recaudacion <span class="ot">&lt;-</span> df_movies <span class="sc">%&gt;%</span></span>
<span id="cb16-456"><a href="#cb16-456"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">worldwide gross ($m)</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-457"><a href="#cb16-457"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-458"><a href="#cb16-458"></a>  <span class="fu">rename</span>(<span class="at">recaudacion_taquilla =</span> <span class="st">`</span><span class="at">worldwide gross ($m)</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-459"><a href="#cb16-459"></a>  <span class="fu">select</span>(movie, recaudacion_taquilla)</span>
<span id="cb16-460"><a href="#cb16-460"></a></span>
<span id="cb16-461"><a href="#cb16-461"></a></span>
<span id="cb16-462"><a href="#cb16-462"></a>top5rec_tabla<span class="ot">&lt;-</span> top5recaudacion <span class="sc">%&gt;%</span></span>
<span id="cb16-463"><a href="#cb16-463"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-464"><a href="#cb16-464"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb16-465"><a href="#cb16-465"></a>    <span class="at">title =</span> <span class="st">"Top 5 películas Marvel - Recaudación mundial"</span>,</span>
<span id="cb16-466"><a href="#cb16-466"></a>    <span class="at">subtitle =</span> <span class="st">"(en millones de dólares)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-467"><a href="#cb16-467"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb16-468"><a href="#cb16-468"></a>    <span class="at">movie =</span> <span class="st">"Película"</span>,</span>
<span id="cb16-469"><a href="#cb16-469"></a>    <span class="at">recaudacion_taquilla =</span> <span class="st">"Recaudación"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb16-470"><a href="#cb16-470"></a>  <span class="fu">fmt_currency</span>(</span>
<span id="cb16-471"><a href="#cb16-471"></a>    <span class="at">columns =</span> recaudacion_taquilla,</span>
<span id="cb16-472"><a href="#cb16-472"></a>    <span class="at">currency =</span> <span class="st">"USD"</span>,</span>
<span id="cb16-473"><a href="#cb16-473"></a>    <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-474"><a href="#cb16-474"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb16-475"><a href="#cb16-475"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb16-476"><a href="#cb16-476"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb16-477"><a href="#cb16-477"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb16-478"><a href="#cb16-478"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb16-479"><a href="#cb16-479"></a>    <span class="at">locations =</span> <span class="fu">cells_title</span>(<span class="at">groups =</span> <span class="fu">c</span>(<span class="st">"title"</span>, <span class="st">"subtitle"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb16-480"><a href="#cb16-480"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb16-481"><a href="#cb16-481"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb16-482"><a href="#cb16-482"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb16-483"><a href="#cb16-483"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb16-484"><a href="#cb16-484"></a>    <span class="at">table.background.color =</span> <span class="st">"#FFF6ED"</span>)</span>
<span id="cb16-485"><a href="#cb16-485"></a></span>
<span id="cb16-486"><a href="#cb16-486"></a>top5rec_tabla</span>
<span id="cb16-487"><a href="#cb16-487"></a><span class="in">```</span></span>
<span id="cb16-488"><a href="#cb16-488"></a></span>
<span id="cb16-489"><a href="#cb16-489"></a>Finalmente, compararemos el top 5 películas más valoradas por la audiencia con las más valoradas por los críticos.</span>
<span id="cb16-490"><a href="#cb16-490"></a></span>
<span id="cb16-493"><a href="#cb16-493"></a><span class="in">```{r}</span></span>
<span id="cb16-494"><a href="#cb16-494"></a>top5audiencia <span class="ot">&lt;-</span> df_movies <span class="sc">%&gt;%</span></span>
<span id="cb16-495"><a href="#cb16-495"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">audience % score</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-496"><a href="#cb16-496"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-497"><a href="#cb16-497"></a>  <span class="fu">rename</span>(<span class="at">audiencia =</span> <span class="st">`</span><span class="at">audience % score</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-498"><a href="#cb16-498"></a>  <span class="fu">select</span>(movie, audiencia)</span>
<span id="cb16-499"><a href="#cb16-499"></a></span>
<span id="cb16-500"><a href="#cb16-500"></a>top5aud_tabla<span class="ot">&lt;-</span> top5audiencia <span class="sc">%&gt;%</span></span>
<span id="cb16-501"><a href="#cb16-501"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-502"><a href="#cb16-502"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb16-503"><a href="#cb16-503"></a>    <span class="at">title =</span> <span class="st">"Top 5 películas Marvel - Mejor valoradas por la audiencia"</span>,</span>
<span id="cb16-504"><a href="#cb16-504"></a>    <span class="at">subtitle =</span> <span class="st">"(en porcentaje)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-505"><a href="#cb16-505"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb16-506"><a href="#cb16-506"></a>    <span class="at">movie =</span> <span class="st">"Película"</span>,</span>
<span id="cb16-507"><a href="#cb16-507"></a>    <span class="at">audiencia =</span> <span class="st">"Porcentaje"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-508"><a href="#cb16-508"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb16-509"><a href="#cb16-509"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb16-510"><a href="#cb16-510"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb16-511"><a href="#cb16-511"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb16-512"><a href="#cb16-512"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb16-513"><a href="#cb16-513"></a>    <span class="at">locations =</span> <span class="fu">cells_title</span>(<span class="at">groups =</span> <span class="fu">c</span>(<span class="st">"title"</span>, <span class="st">"subtitle"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb16-514"><a href="#cb16-514"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb16-515"><a href="#cb16-515"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb16-516"><a href="#cb16-516"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb16-517"><a href="#cb16-517"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb16-518"><a href="#cb16-518"></a>    <span class="at">table.background.color =</span> <span class="st">"#FFF6ED"</span>)</span>
<span id="cb16-519"><a href="#cb16-519"></a></span>
<span id="cb16-520"><a href="#cb16-520"></a>top5aud_tabla</span>
<span id="cb16-521"><a href="#cb16-521"></a></span>
<span id="cb16-522"><a href="#cb16-522"></a><span class="in">```</span></span>
<span id="cb16-523"><a href="#cb16-523"></a></span>
<span id="cb16-526"><a href="#cb16-526"></a><span class="in">```{r}</span></span>
<span id="cb16-527"><a href="#cb16-527"></a>top5criticos <span class="ot">&lt;-</span> df_movies <span class="sc">%&gt;%</span></span>
<span id="cb16-528"><a href="#cb16-528"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">critics % score</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-529"><a href="#cb16-529"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-530"><a href="#cb16-530"></a>  <span class="fu">rename</span>(<span class="at">criticos =</span> <span class="st">`</span><span class="at">critics % score</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-531"><a href="#cb16-531"></a>  <span class="fu">select</span>(movie, criticos)</span>
<span id="cb16-532"><a href="#cb16-532"></a></span>
<span id="cb16-533"><a href="#cb16-533"></a>top5crit_tabla<span class="ot">&lt;-</span> top5criticos <span class="sc">%&gt;%</span></span>
<span id="cb16-534"><a href="#cb16-534"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-535"><a href="#cb16-535"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb16-536"><a href="#cb16-536"></a>    <span class="at">title =</span> <span class="st">"Top 5 películas Marvel - Mejor valoradas por los críticos"</span>,</span>
<span id="cb16-537"><a href="#cb16-537"></a>    <span class="at">subtitle =</span> <span class="st">"(en porcentaje)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-538"><a href="#cb16-538"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb16-539"><a href="#cb16-539"></a>    <span class="at">movie =</span> <span class="st">"Película"</span>,</span>
<span id="cb16-540"><a href="#cb16-540"></a>    <span class="at">criticos =</span> <span class="st">"Porcentaje"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-541"><a href="#cb16-541"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb16-542"><a href="#cb16-542"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb16-543"><a href="#cb16-543"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb16-544"><a href="#cb16-544"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb16-545"><a href="#cb16-545"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb16-546"><a href="#cb16-546"></a>    <span class="at">locations =</span> <span class="fu">cells_title</span>(<span class="at">groups =</span> <span class="fu">c</span>(<span class="st">"title"</span>, <span class="st">"subtitle"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb16-547"><a href="#cb16-547"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb16-548"><a href="#cb16-548"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">font =</span> <span class="st">"mono"</span>),</span>
<span id="cb16-549"><a href="#cb16-549"></a>    <span class="at">locations =</span> <span class="fu">cells_column_labels</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb16-550"><a href="#cb16-550"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb16-551"><a href="#cb16-551"></a>    <span class="at">table.background.color =</span> <span class="st">"#FFF6ED"</span>)</span>
<span id="cb16-552"><a href="#cb16-552"></a></span>
<span id="cb16-553"><a href="#cb16-553"></a>top5crit_tabla</span>
<span id="cb16-554"><a href="#cb16-554"></a><span class="in">```</span></span>
<span id="cb16-555"><a href="#cb16-555"></a></span>
<span id="cb16-556"><a href="#cb16-556"></a>Con esta comparación podemos observar que las películas más aclamadas por la audiencia no coinciden con la valoración de los críticos a excepción de las dos películas de Spider-man lo cual, desde mi punto de vista, es un acierto puesto que a nivel de producción y trama son muy buenos largometrajes.</span>
<span id="cb16-557"><a href="#cb16-557"></a></span>
<span id="cb16-558"><a href="#cb16-558"></a>------------------------------------------------------------------------</span>
<span id="cb16-559"><a href="#cb16-559"></a></span>
<span id="cb16-560"><a href="#cb16-560"></a><span class="fu">### Otro gráfico. Apariciones en cómics y películas.</span></span>
<span id="cb16-561"><a href="#cb16-561"></a></span>
<span id="cb16-562"><a href="#cb16-562"></a>Este  gráfico muestra el número de apariciones que han tenido los personajes. En este caso, hemos pedido los cinco con mayor frecuencia entre los cuales encontramos a Spider-Man y el Capitán América.</span>
<span id="cb16-563"><a href="#cb16-563"></a></span>
<span id="cb16-566"><a href="#cb16-566"></a><span class="in">```{r}</span></span>
<span id="cb16-567"><a href="#cb16-567"></a><span class="co">#- tercer gráfico</span></span>
<span id="cb16-568"><a href="#cb16-568"></a></span>
<span id="cb16-569"><a href="#cb16-569"></a>apariciones <span class="ot">&lt;-</span> df_personajes <span class="sc">%&gt;%</span></span>
<span id="cb16-570"><a href="#cb16-570"></a>   <span class="fu">mutate</span>(<span class="at">Appearances =</span> <span class="fu">as.numeric</span>(Appearances),            </span>
<span id="cb16-571"><a href="#cb16-571"></a>         <span class="at">Appearances =</span> <span class="fu">if_else</span>(<span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"_Jr._(Earth-616)#"</span>, <span class="dv">0</span>, Appearances))</span>
<span id="cb16-572"><a href="#cb16-572"></a></span>
<span id="cb16-573"><a href="#cb16-573"></a>p <span class="ot">&lt;-</span> apariciones  <span class="sc">%&gt;%</span></span>
<span id="cb16-574"><a href="#cb16-574"></a>  <span class="fu">filter</span> (Appearances <span class="sc">&gt;=</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-575"><a href="#cb16-575"></a>  <span class="fu">slice_max</span>(Appearances, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-576"><a href="#cb16-576"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>, Appearances, <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Name/Alias</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb16-577"><a href="#cb16-577"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb16-578"><a href="#cb16-578"></a>  <span class="fu">theme_gray</span>(<span class="at">base_family =</span> <span class="st">"mono"</span>) <span class="sc">+</span></span>
<span id="cb16-579"><a href="#cb16-579"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>, </span>
<span id="cb16-580"><a href="#cb16-580"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">15</span>,</span>
<span id="cb16-581"><a href="#cb16-581"></a>                                   <span class="at">vjust=</span><span class="dv">2</span>,</span>
<span id="cb16-582"><a href="#cb16-582"></a>                                   <span class="at">face=</span><span class="st">"bold"</span>)) <span class="sc">+</span></span>
<span id="cb16-583"><a href="#cb16-583"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> paleta_discreta) <span class="sc">+</span> </span>
<span id="cb16-584"><a href="#cb16-584"></a>  <span class="fu">labs</span>(</span>
<span id="cb16-585"><a href="#cb16-585"></a>    <span class="at">title =</span> <span class="st">"Apariciones de personajes (aprox.)"</span>) </span>
<span id="cb16-586"><a href="#cb16-586"></a></span>
<span id="cb16-587"><a href="#cb16-587"></a><span class="fu">ggplotly</span>(p)</span>
<span id="cb16-588"><a href="#cb16-588"></a></span>
<span id="cb16-589"><a href="#cb16-589"></a><span class="in">```</span></span>
<span id="cb16-590"><a href="#cb16-590"></a></span>
<span id="cb16-591"><a href="#cb16-591"></a>------------------------------------------------------------------------</span>
<span id="cb16-592"><a href="#cb16-592"></a></span>
<span id="cb16-593"><a href="#cb16-593"></a><span class="fu">### ¿Cuál es la película más larga? ¿A qué fase pertenece?</span></span>
<span id="cb16-594"><a href="#cb16-594"></a>En este apartado veremos las distintas duraciones que tienen las películas del MCU y qué fase es la que más películas tiene.</span>
<span id="cb16-595"><a href="#cb16-595"></a>Además, obtendremos cuál es la película más larga.</span>
<span id="cb16-596"><a href="#cb16-596"></a></span>
<span id="cb16-599"><a href="#cb16-599"></a><span class="in">```{r}</span></span>
<span id="cb16-600"><a href="#cb16-600"></a>df_treemap <span class="ot">&lt;-</span> df_fases <span class="sc">%&gt;%</span></span>
<span id="cb16-601"><a href="#cb16-601"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(runtime_min)) <span class="sc">%&gt;%</span>   <span class="co"># quitamos NAs</span></span>
<span id="cb16-602"><a href="#cb16-602"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-603"><a href="#cb16-603"></a>    <span class="at">runtime_min =</span> <span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(runtime_min, <span class="st">"^</span><span class="sc">\\</span><span class="st">d+"</span>)))</span>
<span id="cb16-604"><a href="#cb16-604"></a></span>
<span id="cb16-605"><a href="#cb16-605"></a><span class="fu">treemap</span>(</span>
<span id="cb16-606"><a href="#cb16-606"></a>  df_treemap,</span>
<span id="cb16-607"><a href="#cb16-607"></a>  <span class="at">index =</span> <span class="fu">c</span>(<span class="st">"Phase"</span>, <span class="st">"Film"</span>),</span>
<span id="cb16-608"><a href="#cb16-608"></a>  <span class="at">vSize =</span> <span class="st">"runtime_min"</span>,</span>
<span id="cb16-609"><a href="#cb16-609"></a>  <span class="at">vColor =</span> <span class="st">"runtime_min"</span>,</span>
<span id="cb16-610"><a href="#cb16-610"></a>  <span class="at">type =</span> <span class="st">"value"</span>,</span>
<span id="cb16-611"><a href="#cb16-611"></a>  <span class="at">palette =</span> <span class="st">"RdYlBu"</span>,</span>
<span id="cb16-612"><a href="#cb16-612"></a>  <span class="at">fontsize.labels =</span> <span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">11</span>),</span>
<span id="cb16-613"><a href="#cb16-613"></a>  <span class="at">fontcolor.labels =</span> <span class="fu">c</span>(<span class="st">"white"</span>, <span class="st">"black"</span>)</span>
<span id="cb16-614"><a href="#cb16-614"></a>)</span>
<span id="cb16-615"><a href="#cb16-615"></a></span>
<span id="cb16-616"><a href="#cb16-616"></a><span class="in">```</span></span>
<span id="cb16-617"><a href="#cb16-617"></a>Como podemos observar, *Avengers: Endgame* es la más larga y pertenece a la fase 3.</span>
<span id="cb16-618"><a href="#cb16-618"></a></span>
<span id="cb16-619"><a href="#cb16-619"></a>------------------------------------------------------------------------</span>
<span id="cb16-620"><a href="#cb16-620"></a></span>
<span id="cb16-621"><a href="#cb16-621"></a><span class="fu">### Cartelera</span></span>
<span id="cb16-622"><a href="#cb16-622"></a></span>
<span id="cb16-623"><a href="#cb16-623"></a>Finalmente, acabaremos este trabajo mostrando un gráfico en el que se muestre el número de películas que se han estrenado en los diferentes años.</span>
<span id="cb16-624"><a href="#cb16-624"></a></span>
<span id="cb16-627"><a href="#cb16-627"></a><span class="in">```{r}</span></span>
<span id="cb16-628"><a href="#cb16-628"></a>df_plotline <span class="ot">&lt;-</span> df_fases <span class="sc">%&gt;%</span></span>
<span id="cb16-629"><a href="#cb16-629"></a>  <span class="fu">group_by</span>(release_year) <span class="sc">%&gt;%</span></span>
<span id="cb16-630"><a href="#cb16-630"></a>  <span class="fu">summarise</span>(</span>
<span id="cb16-631"><a href="#cb16-631"></a>    <span class="at">n_peliculas =</span> <span class="fu">n</span>(),</span>
<span id="cb16-632"><a href="#cb16-632"></a>    <span class="at">peliculas =</span> <span class="fu">paste</span>(Film, <span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-633"><a href="#cb16-633"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-634"><a href="#cb16-634"></a>  <span class="fu">mutate</span>(<span class="at">release_year =</span> <span class="fu">as.numeric</span>(release_year)) </span>
<span id="cb16-635"><a href="#cb16-635"></a></span>
<span id="cb16-636"><a href="#cb16-636"></a><span class="co"># Gráfico con línea y puntos</span></span>
<span id="cb16-637"><a href="#cb16-637"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_plotline, <span class="fu">aes</span>(<span class="at">x =</span> release_year, <span class="at">y =</span> n_peliculas,</span>
<span id="cb16-638"><a href="#cb16-638"></a>                             <span class="at">text =</span> <span class="fu">paste0</span>(<span class="st">"Año: "</span>, release_year,</span>
<span id="cb16-639"><a href="#cb16-639"></a>                                           <span class="st">"&lt;br&gt;Películas:</span><span class="sc">\n</span><span class="st">"</span>, peliculas))) <span class="sc">+</span></span>
<span id="cb16-640"><a href="#cb16-640"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"#8c0018"</span> , <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb16-641"><a href="#cb16-641"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"#720014"</span> , <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb16-642"><a href="#cb16-642"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">"mono"</span>) <span class="sc">+</span></span>
<span id="cb16-643"><a href="#cb16-643"></a>  <span class="fu">xlab</span>(<span class="st">"Año de estreno"</span>) <span class="sc">+</span></span>
<span id="cb16-644"><a href="#cb16-644"></a>  <span class="fu">ylab</span>(<span class="st">"Cantidad de películas"</span>) <span class="sc">+</span></span>
<span id="cb16-645"><a href="#cb16-645"></a>  <span class="fu">theme</span>(</span>
<span id="cb16-646"><a href="#cb16-646"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-647"><a href="#cb16-647"></a>    <span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>())</span>
<span id="cb16-648"><a href="#cb16-648"></a></span>
<span id="cb16-649"><a href="#cb16-649"></a><span class="co"># Convertir a interactivo</span></span>
<span id="cb16-650"><a href="#cb16-650"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span>
<span id="cb16-651"><a href="#cb16-651"></a></span>
<span id="cb16-652"><a href="#cb16-652"></a></span>
<span id="cb16-653"><a href="#cb16-653"></a><span class="in">```</span></span>
<span id="cb16-654"><a href="#cb16-654"></a></span>
<span id="cb16-655"><a href="#cb16-655"></a></span>
<span id="cb16-656"><a href="#cb16-656"></a>---</span>
<span id="cb16-657"><a href="#cb16-657"></a></span>
<span id="cb16-658"><a href="#cb16-658"></a><span class="dt">&lt;</span><span class="kw">br</span><span class="dt">&gt;</span></span>
<span id="cb16-659"><a href="#cb16-659"></a></span>
<span id="cb16-660"><a href="#cb16-660"></a>Con esto acabo mi trabajo para BigData ;)</span>
<span id="cb16-661"><a href="#cb16-661"></a></span>
<span id="cb16-662"><a href="#cb16-662"></a></span>
<span id="cb16-663"><a href="#cb16-663"></a>(**wakanda forever**)</span>
<span id="cb16-664"><a href="#cb16-664"></a></span>
<span id="cb16-665"><a href="#cb16-665"></a><span class="dt">&lt;</span><span class="kw">br</span><span class="dt">&gt;</span></span>
<span id="cb16-666"><a href="#cb16-666"></a></span>
<span id="cb16-667"><a href="#cb16-667"></a>------------------------------------------------------------------------</span>
<span id="cb16-668"><a href="#cb16-668"></a></span>
<span id="cb16-669"><a href="#cb16-669"></a><span class="dt">&lt;</span><span class="kw">br</span><span class="dt">&gt;</span></span>
<span id="cb16-670"><a href="#cb16-670"></a></span>
<span id="cb16-671"><a href="#cb16-671"></a><span class="fu">### Información sobre la sesión</span></span>
<span id="cb16-672"><a href="#cb16-672"></a></span>
<span id="cb16-673"><a href="#cb16-673"></a>Abajo muestro mi entorno de trabajo y paquetes utilizados</span>
<span id="cb16-674"><a href="#cb16-674"></a></span>
<span id="cb16-677"><a href="#cb16-677"></a><span class="in">```{r}</span></span>
<span id="cb16-678"><a href="#cb16-678"></a><span class="co">#| echo: false</span></span>
<span id="cb16-679"><a href="#cb16-679"></a>sessioninfo<span class="sc">::</span><span class="fu">session_info</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb16-680"><a href="#cb16-680"></a>  details<span class="sc">::</span><span class="fu">details</span>(<span class="at">summary =</span> <span class="st">'current session info'</span>) </span>
<span id="cb16-681"><a href="#cb16-681"></a><span class="in">```</span></span>
</code></pre></div><button title="Copiar al portapapeles" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2025 Arantxa Arcos</p>
</div>   
    <div class="nav-footer-center">
<p>Hecho con <a href="https://quarto.org">Quarto</a></p>
</div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/araarcos">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:araia@alumni.uv.es">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
</ul>
</div>
  </div>
</footer><script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>


<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>