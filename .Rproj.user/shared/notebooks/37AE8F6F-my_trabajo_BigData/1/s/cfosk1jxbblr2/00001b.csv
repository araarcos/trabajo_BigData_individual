"0","#- En el df de películas no vamos a quitar ninguna columna; sin embargo, vamos a añadir una con el protagonista de cada película."
"0","df_movies <- df_movies %>%"
"0","  mutate (protagonista = case_when("
"0","    grepl(""Iron"", movie) ~ ""Iron Man"","
"0","    grepl(""America"", movie) ~ ""Captain America"","
"0","    grepl(""Thor"", movie) ~ ""Thor"","
"0","    grepl(""Incredible Hulk"", movie) ~ ""Hulk"","
"0","    grepl(""Widow"", movie) ~ ""Black Widow"","
"0","    grepl(""Ant-Man"", movie) ~ ""Ant-Man"","
"0","    grepl(""Spider-Man"", movie) ~ ""Spider-Man"","
"0","    grepl(""Shang-Chi"", movie) ~ ""Shang-Chi"","
"0","    grepl(""Deadpool"", movie) ~ ""Deadpool"","
"0","    grepl(""Panther"", movie) ~ ""Black Panther"","
"0","    grepl(""Strange"", movie) ~ ""Dr Strange"","
"0","  )) %>%"
"0","  relocate (protagonista, .after = category)"
"0",""
"0","#- En este caso, vamos a juntar el df de duración con el dde fases; para ello, primeramente tenemos que cambiar algunos nombres de películas porque la forma en la que están escritos es diferente en cada df y no podemos juntarlos bien."
"0","df_duracion <- df_duracion %>%"
"0","  mutate(movie = case_when("
"0","    movie == ""Spider-Man: Far from Home"" ~ ""Spider-Man: Far From Home"","
"0","    movie == ""Shang-Chi"" ~ ""Shang-Chi and the Legend of the Ten Rings"","
"0","    TRUE ~ movie))"
"0","  "
"0","df_fases <- df_fases %>%"
"0","  select (Phase, Film, Year_Release, Director, movie_image) %>%"
"0","  left_join (df_duracion, by = c(""Film"" = ""movie""))  #- Tener en cuenta que en df_duración solo hasta 2021, aparecerán 5 NAs."
"0",""
"0","#- Por otra parte, en el df de personajes vamos a hacer algunas modificaciones. Comenzaremos quitando estas dos columnas que no nos hacen falta:"
"0","df_personajes <- df_personajes %>%"
"0","  select (- V22, - Notes)"
"0",""
"0","#- A continuación, añadimos una nueva columna llamada ""Alias"" en las que pondremos los nombres de superhéroe de cada personaje y la recolocaremos al lado de los Nombres/Alias originales:"
"0",""
"0","df_personajes <- df_personajes %>%"
"0","  filter(`Name/Alias` != ""Tony Masters"") %>% "
"0","  mutate(Alias = case_when("
"0","    grepl(""Tony"", `Name/Alias`) ~ ""Iron Man"","
"0","    grepl(""Clinton Francis Barton"", `Name/Alias`) ~ ""Hawkeye"","
"0","    grepl(""Rogers"", `Name/Alias`) ~ ""Captain America"","
"0","    grepl(""Thor"", `Name/Alias`) ~ ""Thor"","
"0","    grepl(""Banner"", `Name/Alias`) ~ ""Hulk"","
"0","    grepl(""Romanova"", `Name/Alias`) ~ ""Black Widow"","
"0","    grepl(""Scott Edward Harris Lang"", `Name/Alias`) ~ ""Ant-Man"","
"0","    grepl(""Wanda Maximoff"", `Name/Alias`) ~ ""Scarlet Witch"","
"0","    grepl(""Peter Benjamin Parker"", `Name/Alias`) ~ ""Spider-Man"","
"0","    grepl(""Shang-Chi"", `Name/Alias`) ~ ""Shang-Chi"","
"0","    grepl(""T'Challa"", `Name/Alias`) ~ ""Black Panther"","
"0","    grepl(""Buchanan"", `Name/Alias`) ~ ""Bucky"","
"0","    grepl(""Victor Shade "", `Name/Alias`) ~ ""Vision"","
"0","    grepl(""Doctor Stephen Vincent Strange"", `Name/Alias`) ~ ""Dr Strange"","
"0","    TRUE ~ ""Other"")) %>%"
"0","  relocate(Alias, .after = `Name/Alias`)"
"0",""
"0","#- También vamos a crear un nuevo df con los Vengadores para poder juntarlos con el df_movies"
"0",""
"0","avengers <- df_personajes %>%"
"0","  filter (Alias != ""Other"") %>%"
"0","  select (URL, `Name/Alias`, Alias, Appearances, Gender)"
"0",""
"0","#- Finalmente, juntaremos el df de avengers con el de películas para tener observar las películas individuales que tienen algunos personajes:"
"0",""
"0","pelicula_propia <- avengers %>%"
"0","  left_join(df_movies, by = c(""Alias"" = ""protagonista"")) %>%"
"0","  select (`Name/Alias`,movie, Gender, Appearances, Alias, year)"
"0",""
"0","#- Finalmente, los df que usaremos son los siguientes:"
"0","#- df_fases"
"0","#- pelicula_propia"
"0","#- df_movies"
"0","#- df_total_personajes"
"0",""
